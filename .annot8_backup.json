{
  "timestamp": "2026-02-21T17:31:15.610530",
  "files": {
    "docker-compose.yml": "services:\n  # Discord Bot Service\n  bot:\n    build:\n      context: .\n      dockerfile: Dockerfile\n      args:\n        COMMIT_HASH: ${COMMIT_HASH:-local}\n        BUILD_DATE: ${BUILD_DATE:-now}\n    container_name: isobel-bot\n    restart: unless-stopped\n    ports:\n      - \"${HEALTH_PORT:-3002}:${HEALTH_PORT:-3002}\"\n    volumes:\n      - ./data:/data\n      # Optional: Mount .env file if you prefer file-based config\n      # - ./.env:/config:ro\n    environment:\n      # Required: Discord and Starchild API credentials\n      - DISCORD_TOKEN=${DISCORD_TOKEN}\n      - SONGBIRD_BASE_URL=${SONGBIRD_BASE_URL}\n      - SONGBIRD_API_KEY=${SONGBIRD_API_KEY}\n\n      # Required: Database connection\n      - DATABASE_URL=${DATABASE_URL}\n\n      # Optional: Bot configuration\n      - DATA_DIR=/data\n      - CACHE_LIMIT=${CACHE_LIMIT:-2GB}\n      - BOT_STATUS=${BOT_STATUS:-online}\n      - BOT_ACTIVITY_TYPE=${BOT_ACTIVITY_TYPE:-LISTENING}\n      - BOT_ACTIVITY_URL=${BOT_ACTIVITY_URL:-}\n      - BOT_ACTIVITY=${BOT_ACTIVITY:-music}\n      - ENABLE_SPONSORBLOCK=${ENABLE_SPONSORBLOCK:-false}\n      - SPONSORBLOCK_TIMEOUT=${SPONSORBLOCK_TIMEOUT:-5}\n      - REGISTER_COMMANDS_ON_BOT=${REGISTER_COMMANDS_ON_BOT:-false}\n      - SONGBIRD_NEXT_URL=${SONGBIRD_NEXT_URL:-}\n      - HEALTH_PORT=${HEALTH_PORT:-3002}\n\n      # Environment\n      - NODE_ENV=production\n    networks:\n      - isobel-network\n    healthcheck:\n      test: [\"CMD\", \"wget\", \"--quiet\", \"--tries=1\", \"--spider\", \"http://localhost:3002/health\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n      start_period: 40s\n    deploy:\n      resources:\n        limits:\n          memory: 1G\n          cpus: '1.0'\n        reservations:\n          memory: 512M\n\nnetworks:\n  isobel-network:\n    driver: bridge\n\nvolumes:\n  data:\n    driver: local\n",
    "migrations/20250119200000_baseline_postgresql/migration.sql": "-- CreateTable\nCREATE TABLE \"FileCache\" (\n    \"hash\" TEXT NOT NULL,\n    \"bytes\" INTEGER NOT NULL,\n    \"accessedAt\" TIMESTAMP(3) NOT NULL,\n    \"createdAt\" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"updatedAt\" TIMESTAMP(3) NOT NULL,\n\n    CONSTRAINT \"FileCache_pkey\" PRIMARY KEY (\"hash\")\n);\n\n-- CreateTable\nCREATE TABLE \"KeyValueCache\" (\n    \"key\" TEXT NOT NULL,\n    \"value\" TEXT NOT NULL,\n    \"expiresAt\" TIMESTAMP(3) NOT NULL,\n    \"createdAt\" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"updatedAt\" TIMESTAMP(3) NOT NULL,\n\n    CONSTRAINT \"KeyValueCache_pkey\" PRIMARY KEY (\"key\")\n);\n\n-- CreateTable\nCREATE TABLE \"Setting\" (\n    \"guildId\" TEXT NOT NULL,\n    \"playlistLimit\" INTEGER NOT NULL DEFAULT 50,\n    \"secondsToWaitAfterQueueEmpties\" INTEGER NOT NULL DEFAULT 30,\n    \"leaveIfNoListeners\" BOOLEAN NOT NULL DEFAULT true,\n    \"queueAddResponseEphemeral\" BOOLEAN NOT NULL DEFAULT false,\n    \"autoAnnounceNextSong\" BOOLEAN NOT NULL DEFAULT false,\n    \"defaultVolume\" INTEGER NOT NULL DEFAULT 100,\n    \"defaultQueuePageSize\" INTEGER NOT NULL DEFAULT 10,\n    \"turnDownVolumeWhenPeopleSpeak\" BOOLEAN NOT NULL DEFAULT false,\n    \"turnDownVolumeWhenPeopleSpeakTarget\" INTEGER NOT NULL DEFAULT 20,\n    \"createdAt\" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"updatedAt\" TIMESTAMP(3) NOT NULL,\n\n    CONSTRAINT \"Setting_pkey\" PRIMARY KEY (\"guildId\")\n);\n\n-- CreateTable\nCREATE TABLE \"FavoriteQuery\" (\n    \"id\" SERIAL NOT NULL,\n    \"guildId\" TEXT NOT NULL,\n    \"authorId\" TEXT NOT NULL,\n    \"name\" TEXT NOT NULL,\n    \"query\" TEXT NOT NULL,\n    \"createdAt\" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"updatedAt\" TIMESTAMP(3) NOT NULL,\n\n    CONSTRAINT \"FavoriteQuery_pkey\" PRIMARY KEY (\"id\")\n);\n\n-- CreateIndex\nCREATE UNIQUE INDEX \"FavoriteQuery_guildId_name_key\" ON \"FavoriteQuery\"(\"guildId\", \"name\");\n",
    "darkfloor.one.yaml": "openapi: 3.0.0\npaths:\n  /:\n    get:\n      operationId: AppController_getLandingPage\n      parameters: []\n      responses:\n        \"200\":\n          description: Renders a short overview page and links to documentation\n          content:\n            application/json:\n              schema:\n                type: string\n      summary: Landing page with interactive route explorer\n      tags: &a1\n        - Root\n  /routes:\n    get:\n      operationId: AppController_getRoutes\n      parameters: []\n      responses:\n        \"200\":\n          description: JSON object containing all available routes organized by module\n      summary: Get all available API routes\n      tags: *a1\n  /changelog:\n    get:\n      operationId: AppController_getChangelog\n      parameters: []\n      responses:\n        \"200\":\n          description: Returns the project CHANGELOG in Markdown format\n          content:\n            application/json:\n              schema:\n                type: string\n      summary: Project changelog (Markdown)\n      tags: *a1\n  /health:\n    get:\n      operationId: AppController_getHealth\n      parameters: []\n      responses:\n        \"200\":\n          description: Returns health status including database connectivity\n      summary: Health check endpoint with critical system status\n      tags: *a1\n  /api/spotify/search/tracks:\n    get:\n      operationId: SpotifyController_searchTracks\n      parameters:\n        - name: query\n          required: true\n          in: query\n          description: Search query string\n          schema:\n            type: string\n        - name: limit\n          required: false\n          in: query\n          description: Number of results to return (default 10)\n          schema:\n            type: number\n      responses:\n        \"200\":\n          description: \"\"\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: \"#/components/schemas/TrackDto\"\n      summary: Search for tracks on Spotify\n      tags: &a2\n        - Spotify\n  /api/spotify/recommendations:\n    get:\n      operationId: SpotifyController_getRecommendations\n      parameters:\n        - name: seed_tracks\n          required: false\n          in: query\n          description: Comma-separated Spotify track IDs\n          schema:\n            example: 4iV5W9uYEdYUVa79Axb7Rh,0VjIjW4GlUZ9YafUnjvTv7\n            type: string\n        - name: seed_artists\n          required: false\n          in: query\n          description: Comma-separated Spotify artist IDs\n          schema:\n            example: 4Z8W4fKeB5YxbusRsdQVPb\n            type: string\n        - name: seed_genres\n          required: false\n          in: query\n          description: Comma-separated genre names\n          schema:\n            example: rock,pop,indie\n            type: string\n        - name: limit\n          required: false\n          in: query\n          description: Number of recommendations (1-100)\n          schema:\n            default: 20\n            type: number\n        - name: market\n          required: false\n          in: query\n          description: Market code (ISO 3166-1 alpha-2)\n          schema:\n            type: string\n        - name: target_danceability\n          required: false\n          in: query\n          description: Target danceability (0.0-1.0)\n          schema:\n            type: number\n        - name: target_popularity\n          required: false\n          in: query\n          description: Target popularity (0-100)\n          schema:\n            type: number\n      responses:\n        \"200\":\n          description: \"\"\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/RecommendationResponseDto\"\n      summary: Get Spotify recommendations using seeds\n      tags: *a2\n  /api/spotify/recommendations/from-search:\n    post:\n      operationId: SpotifyController_getRecommendationsFromSearch\n      parameters: []\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/RecommendationsFromSearchRequestDto\"\n      responses:\n        \"200\":\n          description: \"\"\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/RecommendationResponseDto\"\n      summary: Search for a track and get recommendations seeded from it\n      tags: *a2\n  /api/spotify/recommendations/spice-up:\n    post:\n      operationId: SpotifyController_spiceUpPlaylist\n      parameters: []\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/SpiceUpRequestDto\"\n      responses:\n        \"200\":\n          description: \"\"\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/SpiceUpResponseDto\"\n      summary: Generate recommendations to spice up a playlist\n      tags: *a2\n  /api/spotify/recommendations/spice-up/unified:\n    post:\n      operationId: SpotifyController_spiceUpPlaylistUnified\n      parameters: []\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/UnifiedSpiceUpRequestDto\"\n      responses:\n        \"200\":\n          description: \"\"\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/UnifiedSpiceUpResponseDto\"\n      summary: Generate recommendations using multiple platforms (Spotify, Last.fm,\n        Deezer)\n      tags: *a2\n  /auth/register:\n    post:\n      operationId: AuthController_register\n      parameters: []\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/RegisterDto\"\n      responses:\n        \"201\":\n          description: The user has been successfully created.\n      summary: Register a new user\n      tags: &a3\n        - auth\n  /auth/login:\n    post:\n      operationId: AuthController_login\n      parameters: []\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/LoginDto\"\n      responses:\n        \"200\":\n          description: User successfully logged in.\n      summary: Log in a user\n      tags: *a3\n  /auth/me:\n    get:\n      operationId: AuthController_getProfile\n      parameters: []\n      responses:\n        \"200\":\n          description: Return current user info\n      security:\n        - bearer: []\n      summary: Get current user info\n      tags: *a3\n  /api/music/search/tracks:\n    get:\n      operationId: DeezerController_searchTracks\n      parameters:\n        - name: query\n          required: true\n          in: query\n          description: Search query string\n          schema:\n            type: string\n        - name: limit\n          required: false\n          in: query\n          description: Number of results to return (max 25)\n          schema:\n            type: number\n      responses:\n        \"200\":\n          description: Raw response from Deezer search API\n      summary: Search for tracks on Deezer\n      tags: &a4\n        - Deezer\n  /api/music/genres:\n    get:\n      operationId: DeezerController_getGenresEnglish\n      parameters: []\n      responses:\n        \"200\":\n          description: List of Deezer genres in English\n      summary: Get Deezer genres (English)\n      tags: *a4\n  /api/music/releases/latest:\n    get:\n      operationId: DeezerController_getLatestReleases\n      parameters:\n        - name: limit\n          required: false\n          in: query\n          description: \"Number of releases to return (default: 25, max: 100)\"\n          schema:\n            type: number\n      responses:\n        \"200\":\n          description: Latest releases from Deezer editorial API\n      summary: Get latest releases on Deezer\n      tags: *a4\n  /api/music/playlists/popular:\n    get:\n      operationId: DeezerController_getPopularPlaylists\n      parameters:\n        - name: limit\n          required: false\n          in: query\n          description: \"Number of playlists to return (default: 25, max: 100)\"\n          schema:\n            type: number\n      responses:\n        \"200\":\n          description: Popular playlists from Deezer charts\n      summary: Get most popular playlists on Deezer\n      tags: *a4\n  /api/music/playlists/by-genre:\n    get:\n      operationId: DeezerController_getPlaylistsByGenre\n      parameters:\n        - name: genre\n          required: true\n          in: query\n          description: Genre name (e.g., Pop, Rock, Hip Hop)\n          schema:\n            type: string\n        - name: limit\n          required: false\n          in: query\n          description: \"Number of playlists to return (default: 25, max: 100)\"\n          schema:\n            type: number\n      responses:\n        \"200\":\n          description: Playlists matching the genre, using Deezer playlist search\n      summary: Get playlists by genre (best-effort search)\n      tags: *a4\n  /api/music/playlists/by-genre-id:\n    get:\n      operationId: DeezerController_getPlaylistsByGenreId\n      parameters:\n        - name: genreId\n          required: true\n          in: query\n          description: Deezer genre ID (e.g., 132 for Pop)\n          schema:\n            type: number\n        - name: limit\n          required: false\n          in: query\n          description: \"Number of playlists to return (default: 25, max: 100)\"\n          schema:\n            type: number\n      responses:\n        \"200\":\n          description: Playlists matching the genre ID, resolved to a genre name\n      summary: Get playlists by genre ID (best-effort search)\n      tags: *a4\n  /api/music/track/find-id:\n    get:\n      operationId: DeezerController_findTrackId\n      parameters:\n        - name: name\n          required: true\n          in: query\n          description: Track title\n          schema:\n            type: string\n        - name: artist\n          required: false\n          in: query\n          description: Artist name to improve accuracy\n          schema:\n            type: string\n      responses:\n        \"200\":\n          description: \"\"\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/FindTrackIdResponseDto\"\n      summary: Find a Deezer track ID by name and artist\n      tags: *a4\n  /api/music/tracks/convert:\n    post:\n      operationId: DeezerController_convertTracksToDeezerIds\n      parameters: []\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/ConvertToDeezerRequestDto\"\n      responses:\n        \"200\":\n          description: \"\"\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/ConvertToDeezerResponseDto\"\n      summary: Convert an array of tracks to Deezer track IDs\n      tags: *a4\n  /api/music/artist/{artistName}/tracks:\n    get:\n      operationId: DeezerController_getArtistTracks\n      parameters:\n        - name: artistName\n          required: true\n          in: path\n          description: Artist name (URL-encoded)\n          schema:\n            example: Radiohead\n            type: string\n        - name: limit\n          required: false\n          in: query\n          description: \"Maximum number of tracks to return (default: 100)\"\n          schema:\n            type: number\n      responses:\n        \"200\":\n          description: Array of detailed track objects sorted by popularity\n        \"400\":\n          description: Artist not found or invalid request\n      summary: Get all tracks from an artist sorted by popularity\n      tags: *a4\n  /api/music/album/{albumName}/tracks:\n    get:\n      operationId: DeezerController_getAlbumTracks\n      parameters:\n        - name: albumName\n          required: true\n          in: path\n          description: Album name (URL-encoded)\n          schema:\n            example: OK Computer\n            type: string\n        - name: artist\n          required: true\n          in: query\n          description: Artist name\n          schema:\n            type: string\n      responses:\n        \"200\":\n          description: Array of detailed track objects in track order\n        \"400\":\n          description: Album not found or invalid request\n      summary: Get all tracks from an album in track order\n      tags: *a4\n  /api/track/preview:\n    post:\n      description: Accepts a track ID (number), search query (string), or track\n        object. Returns a 1200x600px PNG image with album cover and track\n        details in darkfloor theme.\n      operationId: PreviewController_generatePreview\n      parameters: []\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/PreviewRequestDto\"\n      responses:\n        \"200\":\n          description: PNG image buffer\n          content:\n            image/png:\n              schema:\n                type: string\n                format: binary\n        \"400\":\n          description: Error generating preview - returns JSON error instead of image\n      summary: Generate a social media preview image for a track\n      tags: &a5\n        - Preview Images\n  /api/track/{id}/preview:\n    get:\n      operationId: PreviewController_generatePreviewFromId\n      parameters:\n        - name: id\n          required: true\n          in: path\n          description: Track ID or Deezer track URL/URI\n          schema:\n            type: string\n      responses:\n        \"200\":\n          description: PNG image buffer\n          content:\n            image/png:\n              schema:\n                type: string\n                format: binary\n      summary: Generate preview image from track ID (GET endpoint)\n      tags: *a5\n  /api/preview/test:\n    get:\n      description: Diagnostic endpoint to verify canvas library is working. Returns a\n        simple colored test image.\n      operationId: PreviewController_testCanvas\n      parameters: []\n      responses:\n        \"200\":\n          description: PNG test image\n          content:\n            image/png:\n              schema:\n                type: string\n                format: binary\n      summary: Test canvas library - generates a simple test image\n      tags: *a5\n  /api/preview/default:\n    get:\n      description: Returns a 1200x600px PNG image with Emily the Strange logo centered\n        (slightly to the north) and \"darkfloor.art - lossless music\" text\n        underneath. Uses the same ethereal dark background as track previews.\n      operationId: PreviewController_generateDefaultPreview\n      parameters: []\n      responses:\n        \"200\":\n          description: PNG image buffer\n          content:\n            image/png:\n              schema:\n                type: string\n                format: binary\n      summary: Generate default darkfloor.art preview image\n      tags: *a5\n  /api/preview:\n    get:\n      description: >-\n        GET endpoint that accepts a query parameter for easier OG generation.\n        Extracts the search query from ?q= parameter and generates a track\n        preview image. Falls back to default image if query is missing or track\n        not found.\n\n\n        **Important:** The query parameter must be properly URL-encoded. Use\n        `encodeURIComponent()` on the client side. Examples:\n\n        - \u2705 Works: `?q=isobel%20bj%C3%B6rk` (properly encoded)\n\n        - \u2705 Works: Use `--data-urlencode` with curl\n\n        - \u274c Fails: `?q=isobel+bj\u00f6rk` (unencoded special characters are rejected\n        by NestJS before reaching this handler)\n      operationId: PreviewController_generatePreviewFromQuery\n      parameters:\n        - name: q\n          required: false\n          in: query\n          description: Search query (e.g., \"artist song\")\n          allowEmptyValue: true\n          schema:\n            type: string\n      responses:\n        \"200\":\n          description: PNG image buffer\n          content:\n            image/png:\n              schema:\n                type: string\n                format: binary\n      summary: Generate preview image from query parameter (for OG/meta tags)\n      tags: *a5\n  /music/stream:\n    get:\n      operationId: MusicStreamingController_streamMusic\n      parameters:\n        - name: key\n          required: true\n          in: query\n          schema:\n            type: string\n        - name: id\n          required: false\n          in: query\n          schema:\n            type: string\n        - name: q\n          required: false\n          in: query\n          schema:\n            type: string\n        - name: link\n          required: false\n          in: query\n          schema:\n            type: boolean\n        - name: file\n          required: false\n          in: query\n          schema:\n            type: boolean\n        - name: kbps\n          required: false\n          in: query\n          schema:\n            type: number\n        - name: offset\n          required: false\n          in: query\n          schema:\n            type: number\n      responses:\n        \"200\":\n          description: Stream begins or link provided.\n        \"400\":\n          description: Invalid request parameters.\n        \"401\":\n          description: Invalid or missing API key.\n        \"404\":\n          description: No results found.\n        \"500\":\n          description: Server error during streaming or download.\n      summary: Stream music\n      tags: &a6\n        - music\n  /music/stream/direct:\n    get:\n      description: Streams music directly from Deezer without filesystem operations.\n        Ideal for Vercel and other serverless platforms. Supports HTTP range\n        requests for seeking.\n      operationId: MusicStreamingController_streamMusicDirect\n      parameters:\n        - name: key\n          required: true\n          in: query\n          schema:\n            type: string\n        - name: id\n          required: false\n          in: query\n          schema:\n            type: string\n        - name: q\n          required: false\n          in: query\n          schema:\n            type: string\n        - name: kbps\n          required: false\n          in: query\n          schema:\n            type: number\n        - name: offset\n          required: false\n          in: query\n          schema:\n            type: number\n      responses:\n        \"200\":\n          description: Audio stream begins\n          content:\n            audio/mpeg:\n              schema:\n                type: string\n                format: binary\n        \"400\":\n          description: Invalid request parameters\n        \"401\":\n          description: Unauthorized - invalid API key\n        \"500\":\n          description: Server error during streaming\n      summary: Stream music directly from source (serverless-friendly)\n      tags: *a6\n  /music/health:\n    get:\n      operationId: MusicStreamingController_healthCheck\n      parameters: []\n      responses:\n        \"200\":\n          description: Service is healthy\n      summary: Health check endpoint\n      tags: *a6\n  /music/search:\n    get:\n      operationId: MusicStreamingController_searchMusic\n      parameters:\n        - name: q\n          required: true\n          in: query\n          schema:\n            type: string\n        - name: offset\n          required: false\n          in: query\n          description: \"Result offset for pagination (default: 0)\"\n          schema:\n            type: number\n      responses:\n        \"200\":\n          description: Search results from Deezer.\n        \"500\":\n          description: Error during the search operation.\n      summary: Search music on Deezer\n      tags: *a6\n  /music/cleanup:\n    get:\n      operationId: MusicStreamingController_cleanupDownloadFolder\n      parameters: []\n      responses:\n        \"200\":\n          description: Cleanup successful.\n        \"500\":\n          description: Error during the cleanup operation.\n      summary: Clean up download folder\n      tags: *a6\n  /music/tracks/batch:\n    get:\n      operationId: MusicStreamingController_getBatchTrackMetadata\n      parameters:\n        - name: ids\n          required: true\n          in: query\n          description: Comma-separated Deezer track IDs\n          schema:\n            type: string\n      responses:\n        \"200\":\n          description: Array of track metadata\n        \"400\":\n          description: Invalid track IDs\n      summary: Get metadata for multiple tracks\n      tags: *a6\n  /music/search/advanced:\n    get:\n      operationId: MusicStreamingController_advancedSearch\n      parameters:\n        - name: q\n          required: true\n          in: query\n          description: Search query\n          schema:\n            type: string\n        - name: artist\n          required: false\n          in: query\n          description: Filter by artist\n          schema:\n            type: string\n        - name: album\n          required: false\n          in: query\n          description: Filter by album\n          schema:\n            type: string\n        - name: durationMin\n          required: false\n          in: query\n          description: Minimum duration in seconds\n          schema:\n            type: number\n        - name: durationMax\n          required: false\n          in: query\n          description: Maximum duration in seconds\n          schema:\n            type: number\n        - name: offset\n          required: false\n          in: query\n          description: Pagination offset\n          schema:\n            type: number\n        - name: limit\n          required: false\n          in: query\n          description: Results limit\n          schema:\n            type: number\n      responses:\n        \"200\":\n          description: Filtered search results\n      summary: Advanced search with filters\n      tags: *a6\n  /music/stream-static:\n    get:\n      operationId: MusicStreamingController_streamStaticMusic\n      parameters:\n        - name: id\n          required: true\n          in: query\n          schema:\n            type: number\n        - name: range\n          required: false\n          in: query\n          description: Percentage range of the song to stream, e.g., \"0-20\" or \"20-40\".\n          schema:\n            type: string\n      responses:\n        \"200\":\n          description: Streaming of the music file started.\n        \"400\":\n          description: Invalid ID or ID out of range.\n        \"500\":\n          description: Error during streaming.\n      summary: Stream static music file\n      tags: *a6\n  /music/artist/{artistName}:\n    get:\n      operationId: MusicStreamingController_getArtistSongs\n      parameters:\n        - name: artistName\n          required: true\n          in: path\n          description: Artist name (URL-encoded)\n          schema:\n            example: Radiohead\n            type: string\n        - name: limit\n          required: false\n          in: query\n          description: \"Maximum number of tracks to return (default: 100)\"\n          schema:\n            type: number\n      responses:\n        \"200\":\n          description: Array of detailed track objects sorted by popularity (rank)\n        \"400\":\n          description: Artist not found or invalid request\n      summary: Get all songs from a particular artist sorted by popularity\n      tags: *a6\n  /music/album/{albumName}:\n    get:\n      operationId: MusicStreamingController_getAlbumSongs\n      parameters:\n        - name: albumName\n          required: true\n          in: path\n          description: Album name (URL-encoded)\n          schema:\n            example: OK Computer\n            type: string\n        - name: artist\n          required: true\n          in: query\n          description: Artist name\n          schema:\n            type: string\n      responses:\n        \"200\":\n          description: Array of detailed track objects in track order (by track_position)\n        \"400\":\n          description: Album not found or invalid request\n      summary: Get all songs from an album in track order\n      tags: *a6\n  /music/favorites/{trackId}:\n    post:\n      operationId: FavoritesController_addFavorite\n      parameters:\n        - name: trackId\n          required: true\n          in: path\n          description: Deezer track ID\n          schema:\n            type: string\n      responses:\n        \"201\":\n          description: Track added to favorites\n        \"401\":\n          description: Unauthorized\n        \"404\":\n          description: Track not found\n        \"409\":\n          description: Track already in favorites\n      security: &a7\n        - bearer: []\n      summary: Add a track to favorites\n      tags: &a8\n        - favorites\n    delete:\n      operationId: FavoritesController_removeFavorite\n      parameters:\n        - name: trackId\n          required: true\n          in: path\n          description: Deezer track ID\n          schema:\n            type: string\n      responses:\n        \"204\":\n          description: Track removed from favorites\n        \"401\":\n          description: Unauthorized\n        \"404\":\n          description: Favorite not found\n      security: *a7\n      summary: Remove a track from favorites\n      tags: *a8\n  /music/favorites:\n    get:\n      operationId: FavoritesController_getFavorites\n      parameters:\n        - name: limit\n          required: false\n          in: query\n          description: \"Limit results (default: 50)\"\n          schema:\n            type: number\n        - name: offset\n          required: false\n          in: query\n          description: \"Offset for pagination (default: 0)\"\n          schema:\n            type: number\n      responses:\n        \"200\":\n          description: List of favorite tracks\n        \"401\":\n          description: Unauthorized\n      security: *a7\n      summary: Get all favorite tracks\n      tags: *a8\n  /music/favorites/check/{trackId}:\n    get:\n      operationId: FavoritesController_checkFavorite\n      parameters:\n        - name: trackId\n          required: true\n          in: path\n          description: Deezer track ID\n          schema:\n            type: string\n      responses:\n        \"200\":\n          description: \"Returns { isFavorite: boolean }\"\n        \"401\":\n          description: Unauthorized\n      security: *a7\n      summary: Check if a track is in favorites\n      tags: *a8\n  /music/favorites/count:\n    get:\n      operationId: FavoritesController_getFavoriteCount\n      parameters: []\n      responses:\n        \"200\":\n          description: \"Returns { count: number }\"\n        \"401\":\n          description: Unauthorized\n      security: *a7\n      summary: Get total count of favorite tracks\n      tags: *a8\n  /music/favorites/batch-check:\n    post:\n      operationId: FavoritesController_batchCheckFavorites\n      parameters:\n        - name: trackIds\n          required: true\n          in: query\n          schema:\n            type: string\n      responses:\n        \"200\":\n          description: Returns object with track IDs as keys and boolean values\n        \"401\":\n          description: Unauthorized\n      security: *a7\n      summary: Batch check if tracks are favorited\n      tags: *a8\n  /music/history:\n    get:\n      operationId: ListeningHistoryController_getHistory\n      parameters:\n        - name: limit\n          required: false\n          in: query\n          description: \"Limit results (default: 50)\"\n          schema:\n            type: number\n        - name: offset\n          required: false\n          in: query\n          description: \"Offset for pagination (default: 0)\"\n          schema:\n            type: number\n      responses:\n        \"200\":\n          description: Listening history\n        \"401\":\n          description: Unauthorized\n      security: &a9\n        - bearer: []\n      summary: Get listening history\n      tags: &a10\n        - listening-history\n    delete:\n      operationId: ListeningHistoryController_clearHistory\n      parameters: []\n      responses:\n        \"204\":\n          description: Listening history cleared\n        \"401\":\n          description: Unauthorized\n      security: *a9\n      summary: Clear listening history\n      tags: *a10\n  /music/history/recent:\n    get:\n      operationId: ListeningHistoryController_getRecentlyPlayed\n      parameters:\n        - name: limit\n          required: false\n          in: query\n          description: \"Limit results (default: 20)\"\n          schema:\n            type: number\n      responses:\n        \"200\":\n          description: Recently played tracks\n        \"401\":\n          description: Unauthorized\n      security: *a9\n      summary: Get recently played tracks (unique)\n      tags: *a10\n  /music/history/stats:\n    get:\n      operationId: ListeningHistoryController_getStats\n      parameters:\n        - name: days\n          required: false\n          in: query\n          description: \"Number of days to include in stats (default: 30)\"\n          schema:\n            type: number\n      responses:\n        \"200\":\n          description: Listening statistics\n        \"401\":\n          description: Unauthorized\n      security: *a9\n      summary: Get listening statistics\n      tags: *a10\n  /music/playlists:\n    post:\n      operationId: PlaylistController_createPlaylist\n      parameters: []\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/CreatePlaylistDto\"\n      responses:\n        \"201\":\n          description: Playlist created successfully\n        \"401\":\n          description: Unauthorized\n      security: &a11\n        - bearer: []\n      summary: Create a new playlist\n      tags: &a12\n        - playlists\n    get:\n      operationId: PlaylistController_getUserPlaylists\n      parameters: []\n      responses:\n        \"200\":\n          description: List of playlists\n        \"401\":\n          description: Unauthorized\n      security: *a11\n      summary: Get all playlists for the authenticated user\n      tags: *a12\n  /music/playlists/{playlistId}:\n    get:\n      operationId: PlaylistController_getPlaylist\n      parameters:\n        - name: playlistId\n          required: true\n          in: path\n          description: Playlist ID\n          schema:\n            type: string\n      responses:\n        \"200\":\n          description: Playlist details\n        \"401\":\n          description: Unauthorized\n        \"403\":\n          description: Forbidden - playlist is private\n        \"404\":\n          description: Playlist not found\n      security: *a11\n      summary: Get a specific playlist by ID\n      tags: *a12\n    put:\n      operationId: PlaylistController_updatePlaylist\n      parameters:\n        - name: playlistId\n          required: true\n          in: path\n          description: Playlist ID\n          schema:\n            type: string\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/UpdatePlaylistDto\"\n      responses:\n        \"200\":\n          description: Playlist updated successfully\n        \"401\":\n          description: Unauthorized\n        \"403\":\n          description: Forbidden - not playlist owner\n        \"404\":\n          description: Playlist not found\n      security: *a11\n      summary: Update a playlist\n      tags: *a12\n    delete:\n      operationId: PlaylistController_deletePlaylist\n      parameters:\n        - name: playlistId\n          required: true\n          in: path\n          description: Playlist ID\n          schema:\n            type: string\n      responses:\n        \"204\":\n          description: Playlist deleted successfully\n        \"401\":\n          description: Unauthorized\n        \"403\":\n          description: Forbidden - not playlist owner\n        \"404\":\n          description: Playlist not found\n      security: *a11\n      summary: Delete a playlist\n      tags: *a12\n  /music/playlists/{playlistId}/tracks:\n    post:\n      operationId: PlaylistController_addTrack\n      parameters:\n        - name: playlistId\n          required: true\n          in: path\n          description: Playlist ID\n          schema:\n            type: string\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/AddToPlaylistDto\"\n      responses:\n        \"201\":\n          description: Track added to playlist\n        \"400\":\n          description: Track already in playlist\n        \"401\":\n          description: Unauthorized\n        \"403\":\n          description: Forbidden - not playlist owner\n        \"404\":\n          description: Playlist or track not found\n      security: *a11\n      summary: Add a track to a playlist\n      tags: *a12\n  /music/playlists/{playlistId}/tracks/{trackId}:\n    delete:\n      operationId: PlaylistController_removeTrack\n      parameters:\n        - name: playlistId\n          required: true\n          in: path\n          description: Playlist ID\n          schema:\n            type: string\n        - name: trackId\n          required: true\n          in: path\n          description: Deezer track ID\n          schema:\n            type: string\n      responses:\n        \"200\":\n          description: Track removed from playlist\n        \"401\":\n          description: Unauthorized\n        \"403\":\n          description: Forbidden - not playlist owner\n        \"404\":\n          description: Playlist or track not found\n      security: *a11\n      summary: Remove a track from a playlist\n      tags: *a12\n  /music/playlists/{playlistId}/tracks/reorder:\n    put:\n      operationId: PlaylistController_reorderTrack\n      parameters:\n        - name: playlistId\n          required: true\n          in: path\n          description: Playlist ID\n          schema:\n            type: string\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/ReorderPlaylistDto\"\n      responses:\n        \"200\":\n          description: Track reordered successfully\n        \"400\":\n          description: Invalid position\n        \"401\":\n          description: Unauthorized\n        \"403\":\n          description: Forbidden - not playlist owner\n        \"404\":\n          description: Playlist or track not found\n      security: *a11\n      summary: Reorder a track in a playlist\n      tags: *a12\n  /music/convert/playlist:\n    post:\n      description: Takes an array of song names and converts them to either Spotify or\n        Deezer format. Returns full track data from the target platform for each\n        song.\n      operationId: PlaylistConversionController_convertPlaylist\n      parameters: []\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/PlaylistConversionRequestDto\"\n      responses:\n        \"200\":\n          description: Conversion results with full track data from target platform\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/PlaylistConversionResponseDto\"\n        \"400\":\n          description: Invalid request\n      summary: Convert playlist songs between Spotify and Deezer\n      tags:\n        - playlist-conversion\n  /api/lastfm/track/info:\n    get:\n      operationId: LastfmController_getTrackInfo\n      parameters:\n        - name: artist\n          required: true\n          in: query\n          description: Artist name\n          schema:\n            type: string\n        - name: track\n          required: true\n          in: query\n          description: Track name\n          schema:\n            type: string\n        - name: mbid\n          required: false\n          in: query\n          description: MusicBrainz ID\n          schema:\n            type: string\n      responses:\n        \"200\":\n          description: Track information object\n      summary: Get detailed information for a track\n      tags: &a13\n        - Last.fm\n  /api/lastfm/artist/info:\n    get:\n      operationId: LastfmController_getArtistInfo\n      parameters:\n        - name: artist\n          required: true\n          in: query\n          description: Artist name\n          schema:\n            type: string\n        - name: mbid\n          required: false\n          in: query\n          description: MusicBrainz ID\n          schema:\n            type: string\n      responses:\n        \"200\":\n          description: Artist information object\n      summary: Get detailed information for an artist\n      tags: *a13\n  /api/lastfm/track/search:\n    get:\n      operationId: LastfmController_searchTracks\n      parameters:\n        - name: query\n          required: true\n          in: query\n          description: Search query\n          schema:\n            type: string\n        - name: limit\n          required: false\n          in: query\n          description: Number of results per page\n          schema:\n            type: number\n        - name: page\n          required: false\n          in: query\n          description: Page number\n          schema:\n            type: number\n      responses:\n        \"200\":\n          description: Last.fm search result object\n      summary: Search for tracks on Last.fm\n      tags: *a13\n  /api/lastfm/artist/search:\n    get:\n      operationId: LastfmController_searchArtists\n      parameters:\n        - name: query\n          required: true\n          in: query\n          description: Search query\n          schema:\n            type: string\n        - name: limit\n          required: false\n          in: query\n          description: Number of results per page\n          schema:\n            type: number\n        - name: page\n          required: false\n          in: query\n          description: Page number\n          schema:\n            type: number\n      responses:\n        \"200\":\n          description: Last.fm search result object\n      summary: Search for artists on Last.fm\n      tags: *a13\n  /api/lastfm/artist/top-tracks:\n    get:\n      operationId: LastfmController_getArtistTopTracks\n      parameters:\n        - name: artist\n          required: true\n          in: query\n          description: Artist name\n          schema:\n            type: string\n        - name: limit\n          required: false\n          in: query\n          description: Number of tracks to return\n          schema:\n            type: number\n        - name: page\n          required: false\n          in: query\n          description: Page number\n          schema:\n            type: number\n      responses:\n        \"200\":\n          description: Top tracks response from Last.fm\n      summary: Get top tracks for an artist\n      tags: *a13\n  /api/lastfm/track/similar:\n    get:\n      operationId: LastfmController_getSimilarTracks\n      parameters:\n        - name: artist\n          required: true\n          in: query\n          description: Artist name\n          schema:\n            type: string\n        - name: track\n          required: true\n          in: query\n          description: Track name\n          schema:\n            type: string\n        - name: limit\n          required: false\n          in: query\n          description: Number of similar tracks to return\n          schema:\n            type: number\n      responses:\n        \"200\":\n          description: Similar tracks response from Last.fm\n      summary: Get similar tracks for a given track\n      tags: *a13\n  /api/lastfm/recommendations/spice-up:\n    post:\n      operationId: LastfmController_spiceUpPlaylist\n      parameters: []\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/LastfmSpiceUpRequestDto\"\n      responses:\n        \"200\":\n          description: \"\"\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/LastfmSpiceUpResponseDto\"\n      summary: Generate recommendations using Last.fm similarity data\n      tags: *a13\n  /api/lastfm/recommendations/spice-up-with-deezer:\n    post:\n      operationId: LastfmController_spiceUpPlaylistWithDeezer\n      parameters: []\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/LastfmSpiceUpWithDeezerRequestDto\"\n      responses:\n        \"200\":\n          description: \"\"\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/LastfmSpiceUpWithDeezerResponseDto\"\n      summary: Generate Last.fm recommendations and convert them to Deezer track IDs\n      tags: *a13\n  /api/health:\n    get:\n      description: Returns detailed information about the server status, including\n        database connectivity, external services configuration, memory usage,\n        and system information.\n      operationId: HealthController_getHealth\n      parameters: []\n      responses:\n        \"200\":\n          description: Health check information\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  status:\n                    type: string\n                    enum:\n                      - ok\n                      - degraded\n                      - unhealthy\n                  timestamp:\n                    type: string\n                    format: date-time\n                  version:\n                    type: string\n                  environment:\n                    type: object\n                  uptime:\n                    type: object\n                  memory:\n                    type: object\n                  services:\n                    type: object\n                  config:\n                    type: object\n      summary: Comprehensive health check endpoint\n      tags:\n        - Health\n  /spotify/search:\n    get:\n      operationId: LegacySpotifyController_search\n      parameters:\n        - name: q\n          required: true\n          in: query\n          description: Search query\n          schema:\n            type: string\n        - name: type\n          required: true\n          in: query\n          description: \"Search type: track, playlist, album, artist\"\n          schema:\n            type: string\n        - name: limit\n          required: false\n          in: query\n          description: Results limit (max 50)\n          schema:\n            type: number\n      responses:\n        \"200\":\n          description: Search results\n      security:\n        - bearer: []\n      summary: Legacy Spotify search (V1 compatible route)\n      tags: &a14\n        - Legacy Spotify\n  /spotify/auth/url:\n    get:\n      operationId: LegacySpotifyController_getAuthUrl\n      parameters:\n        - name: state\n          required: false\n          in: query\n          description: CSRF state\n          schema:\n            type: string\n      responses:\n        \"200\":\n          description: \"\"\n      security:\n        - bearer: []\n      summary: Get Spotify OAuth authorization URL\n      tags: *a14\n  /spotify/auth/callback:\n    post:\n      operationId: LegacySpotifyController_handleCallback\n      parameters: []\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/SpotifyAuthCallbackDto\"\n      responses:\n        \"201\":\n          description: \"\"\n      security:\n        - bearer: []\n      summary: Handle Spotify OAuth callback\n      tags: *a14\n  /spotify/auth/disconnect:\n    delete:\n      operationId: LegacySpotifyController_disconnect\n      parameters: []\n      responses:\n        \"200\":\n          description: \"\"\n      security:\n        - bearer: []\n      summary: Disconnect Spotify account\n      tags: *a14\n  /spotify/auth/status:\n    get:\n      operationId: LegacySpotifyController_getConnectionStatus\n      parameters: []\n      responses:\n        \"200\":\n          description: \"\"\n      security:\n        - bearer: []\n      summary: Check Spotify connection status\n      tags: *a14\n  /spotify/playlists:\n    get:\n      operationId: LegacySpotifyController_getUserPlaylists\n      parameters:\n        - name: limit\n          required: false\n          in: query\n          description: Results limit (max 50)\n          schema:\n            type: number\n      responses:\n        \"200\":\n          description: \"\"\n      security:\n        - bearer: []\n      summary: Get user playlists from Spotify\n      tags: *a14\n  /spotify/playlists/{playlistId}:\n    get:\n      operationId: LegacySpotifyController_getPlaylist\n      parameters:\n        - name: playlistId\n          required: true\n          in: path\n          description: Spotify playlist ID\n          schema:\n            type: string\n      responses:\n        \"200\":\n          description: \"\"\n      security:\n        - bearer: []\n      summary: Get Spotify playlist details\n      tags: *a14\n  /spotify/playlists/import:\n    post:\n      operationId: LegacySpotifyController_importPlaylist\n      parameters: []\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/ImportPlaylistDto\"\n      responses:\n        \"201\":\n          description: \"\"\n      security:\n        - bearer: []\n      summary: Import Spotify playlist and match to Deezer\n      tags: *a14\n  /spotify/tracks/{trackId}:\n    get:\n      operationId: LegacySpotifyController_getTrack\n      parameters:\n        - name: trackId\n          required: true\n          in: path\n          description: Spotify track ID\n          schema:\n            type: string\n      responses:\n        \"200\":\n          description: \"\"\n      security:\n        - bearer: []\n      summary: Get Spotify track details\n      tags: *a14\n  /spotify/tracks/analyze:\n    post:\n      operationId: LegacySpotifyController_analyzeTrack\n      parameters: []\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/AnalyzeTrackDto\"\n      responses:\n        \"201\":\n          description: \"\"\n      security:\n        - bearer: []\n      summary: Analyze track for BPM, mood, and characteristics\n      tags: *a14\n  /spotify/tracks/analyze-batch:\n    post:\n      operationId: LegacySpotifyController_analyzeBatch\n      parameters: []\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/BatchAnalyzeTracksDto\"\n      responses:\n        \"201\":\n          description: \"\"\n      security:\n        - bearer: []\n      summary: Analyze multiple tracks in batch\n      tags: *a14\n  /spotify/tracks/{trackId}/audio-features:\n    get:\n      operationId: LegacySpotifyController_getAudioFeatures\n      parameters:\n        - name: trackId\n          required: true\n          in: path\n          description: Spotify track ID\n          schema:\n            type: string\n      responses:\n        \"200\":\n          description: \"\"\n      security:\n        - bearer: []\n      summary: Get audio features for a track\n      tags: *a14\n  /spotify/tracks/{trackId}/audio-analysis:\n    get:\n      operationId: LegacySpotifyController_getAudioAnalysis\n      parameters:\n        - name: trackId\n          required: true\n          in: path\n          description: Spotify track ID\n          schema:\n            type: string\n      responses:\n        \"200\":\n          description: \"\"\n      security:\n        - bearer: []\n      summary: Get detailed audio analysis for a track\n      tags: *a14\n  /version:\n    get:\n      operationId: LegacyMetaController_getVersion\n      parameters: []\n      responses:\n        \"200\":\n          description: \"\"\n      summary: Legacy version endpoint (V1 compatible route)\n      tags: &a15\n        - Legacy Meta\n  /api-yaml:\n    get:\n      operationId: LegacyMetaController_getApiYaml\n      parameters: []\n      responses:\n        \"200\":\n          description: \"\"\n      summary: Legacy OpenAPI YAML endpoint (V1 compatible route)\n      tags: *a15\n  /public/{filename}:\n    get:\n      operationId: LegacyMetaController_servePublicFile\n      parameters:\n        - name: filename\n          required: true\n          in: path\n          schema:\n            type: string\n      responses:\n        \"200\":\n          description: \"\"\n      summary: Legacy public file endpoint (V1 compatible route)\n      tags: *a15\n  /users/profile:\n    get:\n      operationId: UserController_getProfile\n      parameters: []\n      responses:\n        \"200\":\n          description: Return user profile\n      security: &a16\n        - bearer: []\n      summary: Get user profile\n      tags: &a17\n        - users\n    put:\n      operationId: UserController_updateProfile\n      parameters: []\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/UpdateUserDto\"\n      responses:\n        \"200\":\n          description: Return updated user profile\n      security: *a16\n      summary: Update user profile\n      tags: *a17\n  /hexmusic/search/tracks:\n    get:\n      description: Search Spotify for tracks by name, artist, or any search term.\n        Returns up to 10 tracks with details including ID, name, artists, album,\n        and cover art. Results are cached for 24 hours.\n      operationId: HexMusicController_searchTracks\n      parameters:\n        - name: query\n          required: true\n          in: query\n          description: Search query string (track name, artist, or keywords)\n          schema:\n            example: Bohemian Rhapsody Queen\n            type: string\n      responses:\n        \"200\":\n          description: Successfully retrieved track search results\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: \"#/components/schemas/TrackResponseDto\"\n        \"500\":\n          description: Failed to search tracks (Spotify API error)\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/ErrorResponseDto\"\n      summary: Search for tracks\n      tags: &a18\n        - Music & Recommendations\n  /hexmusic/search/playlists:\n    get:\n      description: Search Spotify for playlists by name or keywords. Returns up to 20\n        playlists with metadata including ID, name, description, owner, and\n        track count. Results are cached for 24 hours.\n      operationId: HexMusicController_searchPlaylists\n      parameters:\n        - name: query\n          required: true\n          in: query\n          description: Search query string (playlist name or keywords)\n          schema:\n            example: Rock Classics\n            type: string\n      responses:\n        \"200\":\n          description: Successfully retrieved playlist search results\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: \"#/components/schemas/PlaylistSearchResultDto\"\n        \"500\":\n          description: Failed to search playlists (Spotify API error)\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/ErrorResponseDto\"\n      summary: Search for playlists\n      tags: *a18\n  /hexmusic/playlist/{playlistId}:\n    get:\n      description: Retrieve detailed information about a specific Spotify playlist\n        including all tracks, metadata, and cover art.\n      operationId: HexMusicController_getSpotifyPlaylist\n      parameters:\n        - name: playlistId\n          required: true\n          in: path\n          description: Spotify playlist ID\n          schema:\n            example: 37i9dQZF1DWXRqgorJj26U\n            type: string\n      responses:\n        \"200\":\n          description: Successfully retrieved playlist details\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/PlaylistDetailResponseDto\"\n        \"500\":\n          description: Failed to fetch Spotify playlist\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/ErrorResponseDto\"\n      summary: Get playlist details\n      tags: *a18\n  /hexmusic/recommendations/playlist/{playlistId}:\n    get:\n      description: Generate song recommendations based on the first 5 tracks from a\n        Spotify playlist. Returns 20 recommended tracks similar to the playlist\n        content.\n      operationId: HexMusicController_getRecommendationsFromPlaylist\n      parameters:\n        - name: playlistId\n          required: true\n          in: path\n          description: Spotify playlist ID to base recommendations on\n          schema:\n            example: 37i9dQZF1DWXRqgorJj26U\n            type: string\n      responses:\n        \"200\":\n          description: Successfully generated recommendations from playlist\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  type: object\n                  properties:\n                    id:\n                      type: string\n                    name:\n                      type: string\n                    artists:\n                      type: string\n                    album:\n                      type: string\n                    previewUrl:\n                      type: string\n                      nullable: true\n                    imageUrl:\n                      type: string\n                      nullable: true\n        \"500\":\n          description: Failed to generate recommendations\n      summary: Get recommendations from a playlist\n      tags: *a18\n  /hexmusic/playlist-recommendations:\n    get:\n      description: Search for playlists by query, select the first result, and\n        generate recommendations based on it. Results are saved to the database.\n      operationId: HexMusicController_getPlaylistRecommendations\n      parameters:\n        - name: query\n          required: true\n          in: query\n          description: Playlist search query\n          schema:\n            example: Chill Vibes\n            type: string\n      responses:\n        \"200\":\n          description: Successfully searched playlist and generated recommendations\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  id:\n                    type: string\n                  query:\n                    type: string\n                  selectedPlaylist:\n                    type: object\n                    properties:\n                      id:\n                        type: string\n                      name:\n                        type: string\n                      description:\n                        type: string\n                      owner:\n                        type: string\n                      tracksTotal:\n                        type: number\n                      imageUrl:\n                        type: string\n                        nullable: true\n                  recommendations:\n                    type: array\n                    items:\n                      type: object\n        \"404\":\n          description: No playlists found for query\n        \"500\":\n          description: Failed to process request\n      summary: Search playlists and get recommendations\n      tags: *a18\n  /hexmusic/recommendations:\n    post:\n      description: \"Generate personalized song recommendations based on 1-5 seed\n        tracks. Supports flexible input: provide track IDs, track names (with\n        optional artist), or a mix of both. Configurable recommendation limit\n        (1-100). Results are cached for 24 hours. This is the primary\n        recommendation endpoint with the most flexibility.\"\n      operationId: HexMusicController_getRecommendations\n      parameters: []\n      requestBody:\n        required: true\n        description: Recommendation request with flexible track input\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/RecommendationRequestDto\"\n            examples:\n              Track IDs:\n                value:\n                  tracks:\n                    - id: 3n3Ppam7vgaVa1iaRUc9Lp\n                    - id: 5ChkMS8OtdzJeqyybCc9R5\n                  limit: 20\n                summary: Using Spotify track IDs\n              Track Names:\n                value:\n                  tracks:\n                    - name: Bohemian Rhapsody\n                      artist: Queen\n                    - name: Stairway to Heaven\n                      artist: Led Zeppelin\n                  limit: 30\n                summary: Using track names with artists\n              Mixed Input:\n                value:\n                  tracks:\n                    - id: 3n3Ppam7vgaVa1iaRUc9Lp\n                    - name: Hotel California\n                    - name: Wonderwall\n                      artist: Oasis\n                  limit: 15\n                summary: Mix of IDs and names\n      responses:\n        \"200\":\n          description: Successfully generated recommendations\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: \"#/components/schemas/TrackWithPreviewResponseDto\"\n        \"400\":\n          description: Could not resolve any of the provided tracks\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/ErrorResponseDto\"\n        \"500\":\n          description: Failed to fetch recommendations\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/ErrorResponseDto\"\n      summary: Get song recommendations (flexible input)\n      tags: *a18\n  /hexmusic/recommendations/legacy:\n    post:\n      description: Legacy endpoint for backward compatibility. Accepts only track IDs\n        and returns exactly 20 recommendations. Use the /recommendations\n        endpoint instead for more flexibility.\n      operationId: HexMusicController_getRecommendationsLegacy\n      parameters: []\n      requestBody:\n        required: true\n        description: Legacy recommendation request with track IDs only\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/LegacyRecommendationRequestDto\"\n            examples:\n              default:\n                value:\n                  trackIds:\n                    - 3n3Ppam7vgaVa1iaRUc9Lp\n                    - 5ChkMS8OtdzJeqyybCc9R5\n                    - 0c6xIDDpzE81m2q797ordA\n      responses:\n        \"200\":\n          description: Successfully generated 20 recommendations\n        \"500\":\n          description: Failed to fetch recommendations\n      summary: Get recommendations (legacy endpoint)\n      tags: *a18\n  /hexmusic/recommendations/generate/{playlistSearchId}:\n    post:\n      description: Generate recommendations based on a previously saved playlist\n        search result. Uses the first playlist from the search results.\n        Recommendations are saved to database.\n      operationId: HexMusicController_generateAndSaveRecommendations\n      parameters:\n        - name: playlistSearchId\n          required: true\n          in: path\n          description: ID of a previously saved playlist search\n          schema:\n            example: clx1234567890abcdef\n            type: string\n      responses:\n        \"201\":\n          description: Successfully generated and saved recommendations\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  id:\n                    type: string\n                  playlistSearchId:\n                    type: string\n                  recommendations:\n                    type: array\n                    items:\n                      type: object\n                  createdAt:\n                    type: string\n                    format: date-time\n                  updatedAt:\n                    type: string\n                    format: date-time\n        \"404\":\n          description: Playlist search not found\n        \"500\":\n          description: Failed to generate recommendations\n      summary: Generate and save recommendations from playlist search\n      tags: *a18\n  /hexmusic/songs:\n    get:\n      description: Search for tracks on Spotify with a customizable limit. Similar to\n        /search/tracks but with configurable result count. Returns track details\n        including preview URLs and cover art.\n      operationId: HexMusicController_fetchSongs\n      parameters:\n        - name: query\n          required: true\n          in: query\n          description: Search query for tracks\n          schema:\n            example: The Beatles\n            type: string\n        - name: limit\n          required: false\n          in: query\n          description: Maximum number of results to return\n          schema:\n            example: 10\n            type: number\n      responses:\n        \"200\":\n          description: Successfully fetched songs\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  type: object\n                  properties:\n                    id:\n                      type: string\n                    name:\n                      type: string\n                    artists:\n                      type: array\n                      items:\n                        type: string\n                      example:\n                        - The Beatles\n                    album:\n                      type: string\n                    previewUrl:\n                      type: string\n                      nullable: true\n                    imageUrl:\n                      type: string\n                      nullable: true\n        \"500\":\n          description: Failed to fetch songs\n      summary: Fetch songs (search tracks)\n      tags: *a18\n  /hexmusic/recommendations/bulk:\n    post:\n      description: Submit an array of songs and receive recommendations. Accepts any\n        number of songs (uses up to 5 as seeds due to Spotify API limits). Each\n        song can be specified by ID, name, or name+artist. The \"n\" parameter\n        controls how many recommendations to return (defaults to the number of\n        input songs). Perfect for getting recommendations based on a playlist or\n        collection of songs.\n      operationId: HexMusicController_getBulkRecommendations\n      parameters: []\n      requestBody:\n        required: true\n        description: Bulk songs recommendation request\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/BulkSongsRecommendationDto\"\n            examples:\n              With IDs and Names:\n                value:\n                  giveSongs:\n                    - id: 3n3Ppam7vgaVa1iaRUc9Lp\n                      name: Mr. Brightside\n                    - name: Somebody Told Me\n                      artist: The Killers\n                    - name: When You Were Young\n                      artist: The Killers\n                    - id: 0eGsygTp906u18L0Oimnem\n                  n: 10\n                summary: Mixed IDs and names with custom count\n              Only Names:\n                value:\n                  giveSongs:\n                    - name: Blinding Lights\n                      artist: The Weeknd\n                    - name: Levitating\n                      artist: Dua Lipa\n                    - name: Save Your Tears\n                      artist: The Weeknd\n                    - name: Don't Start Now\n                      artist: Dua Lipa\n                    - name: Peaches\n                      artist: Justin Bieber\n                summary: Using only track names (returns 5 recommendations by default)\n              Large Playlist:\n                value:\n                  giveSongs:\n                    - name: Bohemian Rhapsody\n                      artist: Queen\n                    - name: Stairway to Heaven\n                      artist: Led Zeppelin\n                    - name: Hotel California\n                      artist: Eagles\n                    - name: Imagine\n                      artist: John Lennon\n                    - name: Sweet Child O Mine\n                      artist: Guns N' Roses\n                    - name: November Rain\n                      artist: Guns N' Roses\n                    - name: Dream On\n                      artist: Aerosmith\n                  n: 20\n                summary: 7 classic rock songs, requesting 20 recommendations\n      responses:\n        \"200\":\n          description: Successfully generated bulk recommendations\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: \"#/components/schemas/TrackWithPreviewResponseDto\"\n        \"400\":\n          description: Could not resolve any of the provided songs\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/ErrorResponseDto\"\n        \"500\":\n          description: Failed to generate bulk recommendations\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/ErrorResponseDto\"\n      summary: Get recommendations from bulk songs\n      tags: *a18\n  /hexmusic/recommendations/deezer:\n    post:\n      description: Submit an array of track names and receive Deezer track\n        recommendations with Deezer IDs. Track names can be simple titles or\n        \"Artist - Track\" format for better accuracy. The \"n\" parameter controls\n        how many recommendations to return (defaults to the number of input\n        tracks). Perfect for getting Deezer-based recommendations that can be\n        used with the Deezer API or player. Results are cached for 24 hours and\n        stored in the database.\n      operationId: HexMusicController_getDeezerRecommendations\n      parameters: []\n      requestBody:\n        required: true\n        description: Deezer recommendation request with track names and optional mode\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/DeezerRecommendationRequestDto\"\n            examples:\n              Strict Mode - Same Artists:\n                value:\n                  trackNames:\n                    - Queen - Bohemian Rhapsody\n                    - Queen - We Will Rock You\n                    - Led Zeppelin - Stairway to Heaven\n                  n: 10\n                  mode: 0\n                summary: \"Strict mode (0): Returns more tracks from the same artists\"\n              Balanced Mode - Related Artists:\n                value:\n                  trackNames:\n                    - Bohemian Rhapsody\n                    - Stairway to Heaven\n                    - Hotel California\n                    - Imagine\n                  n: 15\n                  mode: 1\n                summary: \"Balanced mode (1): Returns tracks from related artists in similar\n                  genres\"\n              Diverse Mode - Genre Variety:\n                value:\n                  trackNames:\n                    - The Weeknd - Blinding Lights\n                    - Dua Lipa - Levitating\n                    - Pink Floyd - Comfortably Numb\n                  n: 20\n                  mode: 2\n                summary: \"Diverse mode (2): Returns varied tracks with loose genre adherence\"\n              Default Mode (Balanced):\n                value:\n                  trackNames:\n                    - Blinding Lights\n                    - Levitating\n                    - Save Your Tears\n                  n: 10\n                summary: No mode specified - defaults to Balanced (1)\n      responses:\n        \"200\":\n          description: Successfully generated Deezer recommendations\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: \"#/components/schemas/DeezerTrackResponseDto\"\n        \"400\":\n          description: Could not resolve any of the provided track names\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/ErrorResponseDto\"\n        \"500\":\n          description: Failed to generate Deezer recommendations\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/ErrorResponseDto\"\n      summary: Get Deezer recommendations from track names\n      tags: *a18\n  /hexmusic/recommendations/json:\n    post:\n      description: Legacy endpoint that accepts a JSON string of song objects. Parses\n        the JSON and generates recommendations from the song IDs. Use the\n        /recommendations/bulk endpoint instead for better type safety.\n      operationId: HexMusicController_getRecommendationsFromJson\n      parameters: []\n      requestBody:\n        required: true\n        description: JSON string containing array of song objects with IDs\n        content:\n          application/json:\n            schema:\n              type: object\n              properties:\n                songs:\n                  type: string\n                  example: '[{\"id\":\"3n3Ppam7vgaVa1iaRUc9Lp\",\"name\":\"Mr.\n                    Brightside\"},{\"id\":\"5ChkMS8OtdzJeqyybCc9R5\",\"name\":\"Somebody\n                    Told Me\"}]'\n              required:\n                - songs\n      responses:\n        \"200\":\n          description: Successfully generated recommendations from JSON\n        \"400\":\n          description: Invalid JSON input or empty array\n        \"500\":\n          description: Failed to fetch recommendations\n      summary: Get recommendations from JSON string (legacy)\n      tags: *a18\ninfo:\n  title: Darkfloor.one API\n  description: Aggregated music intelligence from Spotify, Last.fm, and Deezer\n    with unified authentication, caching, and playlist workflows.\n  version: 1.0.0\n  contact: {}\ntags: []\nservers:\n  - url: https://www.darkfloor.one\n    description: Production (HTTPS)\n  - url: http://localhost:3333\n    description: Local development\ncomponents:\n  securitySchemes:\n    JWT-auth:\n      scheme: bearer\n      bearerFormat: JWT\n      type: http\n      description: JWT Bearer token for protected endpoints\n      in: header\n  schemas:\n    TrackArtistDto:\n      type: object\n      properties:\n        name:\n          type: string\n          description: Artist name\n        id:\n          type: string\n          description: Spotify artist ID\n      required:\n        - name\n        - id\n    TrackAlbumDto:\n      type: object\n      properties:\n        name:\n          type: string\n          description: Album name\n      required:\n        - name\n    TrackExternalUrlsDto:\n      type: object\n      properties:\n        spotify:\n          type: string\n          description: Spotify URL for the track\n      required:\n        - spotify\n    TrackDto:\n      type: object\n      properties:\n        id:\n          type: string\n          description: Spotify track ID\n        name:\n          type: string\n          description: Track title\n        artists:\n          description: List of track artists\n          type: array\n          items:\n            $ref: \"#/components/schemas/TrackArtistDto\"\n        album:\n          description: Album information\n          allOf:\n            - $ref: \"#/components/schemas/TrackAlbumDto\"\n        popularity:\n          type: number\n          description: Popularity score (0-100)\n        preview_url:\n          type: object\n          description: 30 second preview MP3 URL\n        external_urls:\n          description: External URLs for the track\n          allOf:\n            - $ref: \"#/components/schemas/TrackExternalUrlsDto\"\n        explicit:\n          type: boolean\n          description: Whether the track is explicit\n        isrc:\n          type: string\n          description: ISRC code if available\n      required:\n        - id\n        - name\n        - artists\n        - album\n        - popularity\n        - external_urls\n    RecommendationSeedDto:\n      type: object\n      properties:\n        id:\n          type: string\n          description: Seed identifier\n        type:\n          type: string\n          description: Seed type (track, artist, genre)\n        initialPoolSize:\n          type: number\n          description: Initial pool size used by Spotify\n      required:\n        - id\n        - type\n        - initialPoolSize\n    RecommendationResponseDto:\n      type: object\n      properties:\n        seeds:\n          description: Seed details provided by Spotify\n          type: array\n          items:\n            $ref: \"#/components/schemas/RecommendationSeedDto\"\n        tracks:\n          description: Recommended tracks\n          type: array\n          items:\n            $ref: \"#/components/schemas/TrackDto\"\n      required:\n        - seeds\n        - tracks\n    RecommendationsFromSearchRequestDto:\n      type: object\n      properties:\n        query:\n          type: string\n          description: Search query used to find a seed track\n        limit:\n          type: number\n          description: Number of recommendations to return (1-100)\n          default: 20\n      required:\n        - query\n    SongInputDto:\n      type: object\n      properties:\n        name:\n          type: string\n          description: Song title to use for seed search\n        artist:\n          type: string\n          description: Artist name to use for seed search\n        album:\n          type: string\n          description: Album name to use for seed search\n    SpiceUpRequestDto:\n      type: object\n      properties:\n        songs:\n          minItems: 1\n          description: Songs used to generate seed information\n          type: array\n          items:\n            $ref: \"#/components/schemas/SongInputDto\"\n        limit:\n          type: number\n          description: Number of recommendations to return (1-100)\n          default: 20\n        mode:\n          type: string\n          description: Diversity mode. strict -> most similar, balanced -> moderate\n            variety, diverse -> maximum variety, wild -> experimental\n            combinations\n          enum: &a19\n            - strict\n            - balanced\n            - diverse\n            - wild\n          default: balanced\n        excludeTrackIds:\n          description: Spotify track IDs to exclude from recommendations\n          type: array\n          items:\n            type: string\n        excludeDeezerIds:\n          description: Deezer track IDs to exclude from recommendations\n          type: array\n          items:\n            type: string\n        excludeExplicit:\n          type: boolean\n          description: Exclude explicit tracks from recommendations\n          default: false\n        maxSeeds:\n          type: number\n          description: Maximum number of seeds to use from the queue (hard capped at 50)\n          default: 30\n          maximum: 50\n        sampling:\n          type: string\n          description: Deterministic sampling strategy for large queues (ordered preserves\n            input order)\n          enum: &a20\n            - evenly-spaced\n            - ordered\n          default: evenly-spaced\n        seedStride:\n          type: number\n          description: Optional stride for deterministic sampling (used when\n            sampling=evenly-spaced)\n          minimum: 1\n        queueMode:\n          type: string\n          description: Queue mode for server-side history blending (defaults to\n            useQueueOnly)\n          enum: &a21\n            - useQueueOnly\n            - blendHistory\n            - includeHistory\n          default: useQueueOnly\n        historySongs:\n          description: Optional server-provided history seeds (ignored when\n            queueMode=useQueueOnly)\n          type: array\n          items:\n            $ref: \"#/components/schemas/SongInputDto\"\n      required:\n        - songs\n    SpiceUpTrackDto:\n      type: object\n      properties:\n        id:\n          type: string\n          description: Spotify track ID\n        name:\n          type: string\n          description: Track title\n        artists:\n          description: List of track artists\n          type: array\n          items:\n            $ref: \"#/components/schemas/TrackArtistDto\"\n        album:\n          description: Album information\n          allOf:\n            - $ref: \"#/components/schemas/TrackAlbumDto\"\n        popularity:\n          type: number\n          description: Popularity score (0-100)\n        preview_url:\n          type: object\n          description: 30 second preview MP3 URL\n        external_urls:\n          description: External URLs for the track\n          allOf:\n            - $ref: \"#/components/schemas/TrackExternalUrlsDto\"\n        explicit:\n          type: boolean\n          description: Whether the track is explicit\n        isrc:\n          type: string\n          description: ISRC code if available\n        deezerId:\n          type: object\n          description: Resolved Deezer track ID when available\n        source:\n          type: string\n          description: Recommendation source platform\n          enum:\n            - spotify\n            - lastfm\n            - deezer\n        reason:\n          type: string\n          description: Optional reason string for UI display\n        score:\n          type: number\n          description: Optional score for UI display (0-1)\n      required:\n        - id\n        - name\n        - artists\n        - album\n        - popularity\n        - external_urls\n    SpiceUpSeedDto:\n      type: object\n      properties:\n        id:\n          type: string\n          description: Seed identifier used by Spotify\n        type:\n          type: string\n          description: Seed type (track, artist, genre)\n        initialPoolSize:\n          type: number\n          description: Initial pool size for the seed\n      required:\n        - id\n        - type\n        - initialPoolSize\n    SpiceUpSongResultDto:\n      type: object\n      properties:\n        input:\n          description: Original song input\n          allOf:\n            - $ref: \"#/components/schemas/SongInputDto\"\n        track:\n          description: Found track information\n          allOf:\n            - $ref: \"#/components/schemas/TrackDto\"\n        confidence:\n          type: number\n          description: Search confidence score (0-1)\n        searchMethod:\n          type: string\n          description: Search method used\n        error:\n          type: string\n          description: Error message if search failed\n      required:\n        - input\n        - confidence\n        - searchMethod\n    SeedQualityMetricsDto:\n      type: object\n      properties:\n        overallScore:\n          type: number\n          description: Overall seed quality score (0-1)\n        uniqueArtists:\n          type: number\n          description: Number of unique artists in seeds\n        popularityRange:\n          type: object\n          description: Popularity range of seed tracks\n        diversityScore:\n          type: number\n          description: Audio feature diversity score\n        recommendations:\n          description: Recommendations for improving seed quality\n          type: array\n          items:\n            type: string\n      required:\n        - overallScore\n        - uniqueArtists\n        - popularityRange\n        - diversityScore\n    SpiceUpResponseDto:\n      type: object\n      properties:\n        mode:\n          type: string\n          description: Diversity mode applied\n        inputSongs:\n          type: number\n          description: Number of input songs provided\n        foundSongs:\n          type: number\n          description: Number of songs successfully found\n        tracks:\n          description: Recommended tracks (consistent envelope)\n          type: array\n          items:\n            $ref: \"#/components/schemas/SpiceUpTrackDto\"\n        recommendations:\n          description: \"Deprecated: use tracks instead\"\n          type: array\n          items:\n            $ref: \"#/components/schemas/SpiceUpTrackDto\"\n        seeds:\n          description: Seed data returned by Spotify\n          type: array\n          items:\n            $ref: \"#/components/schemas/SpiceUpSeedDto\"\n        songResults:\n          description: Detailed results for each input song\n          type: array\n          items:\n            $ref: \"#/components/schemas/SpiceUpSongResultDto\"\n        seedQuality:\n          description: Seed quality analysis\n          allOf:\n            - $ref: \"#/components/schemas/SeedQualityMetricsDto\"\n        warnings:\n          description: Warning messages for partial failures\n          type: array\n          items:\n            type: string\n        requestId:\n          type: string\n          description: Request ID for traceability\n      required:\n        - mode\n        - inputSongs\n        - foundSongs\n        - tracks\n        - seeds\n        - songResults\n        - warnings\n    UnifiedSpiceUpRequestDto:\n      type: object\n      properties:\n        songs:\n          minItems: 1\n          description: Songs used to generate seed information\n          type: array\n          items:\n            $ref: \"#/components/schemas/SongInputDto\"\n        limit:\n          type: number\n          description: Number of recommendations to return (1-100)\n          default: 20\n        mode:\n          type: string\n          description: Diversity mode. strict -> most similar, balanced -> moderate\n            variety, diverse -> maximum variety, wild -> experimental\n            combinations\n          enum: *a19\n          default: balanced\n        excludeTrackIds:\n          description: Spotify track IDs to exclude from recommendations\n          type: array\n          items:\n            type: string\n        excludeDeezerIds:\n          description: Deezer track IDs to exclude from recommendations\n          type: array\n          items:\n            type: string\n        excludeExplicit:\n          type: boolean\n          description: Exclude explicit tracks from recommendations\n          default: false\n        maxSeeds:\n          type: number\n          description: Maximum number of seeds to use from the queue (hard capped at 50)\n          default: 30\n          maximum: 50\n        sampling:\n          type: string\n          description: Deterministic sampling strategy for large queues (ordered preserves\n            input order)\n          enum: *a20\n          default: evenly-spaced\n        seedStride:\n          type: number\n          description: Optional stride for deterministic sampling (used when\n            sampling=evenly-spaced)\n          minimum: 1\n        queueMode:\n          type: string\n          description: Queue mode for server-side history blending (defaults to\n            useQueueOnly)\n          enum: *a21\n          default: useQueueOnly\n        historySongs:\n          description: Optional server-provided history seeds (ignored when\n            queueMode=useQueueOnly)\n          type: array\n          items:\n            $ref: \"#/components/schemas/SongInputDto\"\n        platforms:\n          type: string\n          description: Platforms to use for recommendations\n          enum:\n            - spotify\n            - lastfm\n            - deezer\n            - auto\n          default: auto\n      required:\n        - songs\n    UnifiedSpiceUpResponseDto:\n      type: object\n      properties:\n        mode:\n          type: string\n          description: Diversity mode applied\n        inputSongs:\n          type: number\n          description: Number of input songs provided\n        foundSongs:\n          type: number\n          description: Number of songs successfully found\n        tracks:\n          description: Recommended tracks (consistent envelope)\n          type: array\n          items:\n            $ref: \"#/components/schemas/SpiceUpTrackDto\"\n        recommendations:\n          description: \"Deprecated: use tracks instead\"\n          type: array\n          items:\n            $ref: \"#/components/schemas/SpiceUpTrackDto\"\n        seeds:\n          description: Seed data returned by Spotify\n          type: array\n          items:\n            $ref: \"#/components/schemas/SpiceUpSeedDto\"\n        songResults:\n          description: Detailed results for each input song\n          type: array\n          items:\n            $ref: \"#/components/schemas/SpiceUpSongResultDto\"\n        seedQuality:\n          description: Seed quality analysis\n          allOf:\n            - $ref: \"#/components/schemas/SeedQualityMetricsDto\"\n        warnings:\n          description: Warning messages for partial failures\n          type: array\n          items:\n            type: string\n        requestId:\n          type: string\n          description: Request ID for traceability\n        platformsUsed:\n          description: Platforms used for generating recommendations\n          type: array\n          items:\n            type: string\n        platformResults:\n          type: object\n          description: Platform-specific results\n      required:\n        - mode\n        - inputSongs\n        - foundSongs\n        - tracks\n        - seeds\n        - songResults\n        - warnings\n        - platformsUsed\n    RegisterDto:\n      type: object\n      properties:\n        name:\n          type: string\n          example: John Doe\n          description: The name of the user\n        email:\n          type: string\n          example: john@example.com\n          description: The email of the user\n        password:\n          type: string\n          example: password123\n          description: The password of the user\n      required:\n        - name\n        - email\n        - password\n    LoginDto:\n      type: object\n      properties:\n        email:\n          type: string\n          example: user@example.com\n          description: The email of the user\n        password:\n          type: string\n          example: password123\n          description: The password of the user\n      required:\n        - email\n        - password\n    FindTrackIdResponseDto:\n      type: object\n      properties:\n        name:\n          type: string\n          description: Original track title\n        artist:\n          type: string\n          description: Original artist name\n        deezerId:\n          type: object\n          description: Matched Deezer track ID\n      required:\n        - name\n    TrackToConvertDto:\n      type: object\n      properties:\n        name:\n          type: string\n          description: Track title to search on Deezer\n        artist:\n          type: string\n          description: Artist name to improve Deezer search accuracy\n      required:\n        - name\n    ConvertToDeezerRequestDto:\n      type: object\n      properties:\n        tracks:\n          minItems: 1\n          description: Tracks to convert to Deezer IDs\n          type: array\n          items:\n            $ref: \"#/components/schemas/TrackToConvertDto\"\n      required:\n        - tracks\n    ConvertedTrackResultDto:\n      type: object\n      properties:\n        name:\n          type: string\n          description: Original track title\n        artist:\n          type: string\n          description: Original artist name\n        deezerId:\n          type: object\n          description: Matched Deezer track ID\n      required:\n        - name\n    ConvertToDeezerResponseDto:\n      type: object\n      properties:\n        converted:\n          type: number\n          description: Number of tracks successfully converted\n        total:\n          type: number\n          description: Total number of tracks processed\n        tracks:\n          description: Conversion results per track\n          type: array\n          items:\n            $ref: \"#/components/schemas/ConvertedTrackResultDto\"\n      required:\n        - converted\n        - total\n        - tracks\n    PreviewRequestDto:\n      type: object\n      properties:\n        id:\n          type: number\n          description: Deezer track ID (number)\n        query:\n          type: string\n          description: Search query string (will use first result)\n        track:\n          type: object\n          description: Deezer track object (full track data)\n    CreatePlaylistDto:\n      type: object\n      properties:\n        name:\n          type: string\n          description: Playlist name\n          example: My Chill Vibes\n          maxLength: 100\n        description:\n          type: string\n          description: Playlist description\n          example: Perfect music for relaxing evenings\n          maxLength: 500\n        isPublic:\n          type: boolean\n          description: Whether the playlist is public\n          example: true\n          default: true\n        coverImage:\n          type: string\n          description: Cover image URL\n          example: https://example.com/cover.jpg\n      required:\n        - name\n    UpdatePlaylistDto:\n      type: object\n      properties:\n        name:\n          type: string\n          description: Playlist name\n          example: My Updated Playlist\n          maxLength: 100\n        description:\n          type: string\n          description: Playlist description\n          example: Updated description\n          maxLength: 500\n        isPublic:\n          type: boolean\n          description: Whether the playlist is public\n          example: false\n        coverImage:\n          type: string\n          description: Cover image URL\n          example: https://example.com/new-cover.jpg\n    AddToPlaylistDto:\n      type: object\n      properties:\n        deezerTrackId:\n          type: string\n          description: Deezer track ID to add\n          example: \"3135556\"\n        position:\n          type: number\n          description: Position in playlist (optional, defaults to end)\n          example: 5\n      required:\n        - deezerTrackId\n    ReorderPlaylistDto:\n      type: object\n      properties:\n        trackId:\n          type: string\n          description: Track ID to move\n          example: 123e4567-e89b-12d3-a456-426614174000\n        newPosition:\n          type: number\n          description: New position (0-based index)\n          example: 3\n      required:\n        - trackId\n        - newPosition\n    PlaylistConversionRequestDto:\n      type: object\n      properties:\n        songs:\n          description: Array of songs to convert\n          example:\n            - name: Creep\n              artist: Radiohead\n            - name: Bohemian Rhapsody\n              artist: Queen\n          type: array\n          items:\n            $ref: \"#/components/schemas/SongInputDto\"\n        output:\n          type: string\n          enum:\n            - deezer\n            - spotify\n          description: Target platform for conversion\n          example: deezer\n      required:\n        - songs\n        - output\n    PlaylistConversionResponseDto:\n      type: object\n      properties:\n        output:\n          type: string\n          description: Target platform\n        inputCount:\n          type: number\n          description: Number of input songs\n        convertedCount:\n          type: number\n          description: Number of successfully converted songs\n        results:\n          description: Array of conversion results, one per input song\n          type: array\n          items:\n            type: string\n      required:\n        - output\n        - inputCount\n        - convertedCount\n        - results\n    LastfmSongInputDto:\n      type: object\n      properties:\n        name:\n          type: string\n          description: Song title to use for Last.fm search\n        artist:\n          type: string\n          description: Artist name to use for Last.fm search\n        album:\n          type: string\n          description: Album name to use for Last.fm search\n    LastfmSpiceUpRequestDto:\n      type: object\n      properties:\n        songs:\n          minItems: 1\n          description: Songs used as seeds for Last.fm search\n          type: array\n          items:\n            $ref: \"#/components/schemas/LastfmSongInputDto\"\n        limit:\n          type: number\n          description: Number of recommended tracks to return (1-100)\n          default: 20\n        mode:\n          type: string\n          description: Diversity mode for recommendation variety\n          enum: &a22\n            - strict\n            - normal\n            - diverse\n          default: normal\n      required:\n        - songs\n    LastfmRecommendationDto:\n      type: object\n      properties:\n        name:\n          type: string\n          description: Track name\n        artist:\n          type: string\n          description: Artist name\n        url:\n          type: string\n          description: Last.fm track URL\n        match:\n          type: number\n          description: Match score provided by Last.fm\n        mbid:\n          type: string\n          description: MusicBrainz ID if available\n      required:\n        - name\n        - artist\n        - url\n    LastfmSpiceUpResponseDto:\n      type: object\n      properties:\n        mode:\n          type: string\n          description: Diversity mode applied\n        inputSongs:\n          type: number\n          description: Number of input songs provided\n        recommendations:\n          description: Recommended Last.fm tracks\n          type: array\n          items:\n            $ref: \"#/components/schemas/LastfmRecommendationDto\"\n        foundSongs:\n          type: number\n          description: Number of input songs successfully matched on Last.fm\n      required:\n        - mode\n        - inputSongs\n        - recommendations\n        - foundSongs\n    LastfmSpiceUpWithDeezerRequestDto:\n      type: object\n      properties:\n        songs:\n          minItems: 1\n          description: Songs used as seeds for Last.fm search\n          type: array\n          items:\n            $ref: \"#/components/schemas/LastfmSongInputDto\"\n        limit:\n          type: number\n          description: Number of recommended tracks to return (1-100)\n          default: 20\n        mode:\n          type: string\n          description: Diversity mode for recommendation variety\n          enum: *a22\n          default: normal\n        convertToDeezer:\n          type: boolean\n          description: Convert Last.fm recommendations to Deezer track IDs\n          default: true\n      required:\n        - songs\n    LastfmSpiceUpWithDeezerResponseRecommendationDto:\n      type: object\n      properties:\n        name:\n          type: string\n          description: Track name\n        artist:\n          type: string\n          description: Artist name\n        url:\n          type: string\n          description: Last.fm track URL\n        match:\n          type: number\n          description: Match score provided by Last.fm\n        mbid:\n          type: string\n          description: MusicBrainz ID if available\n        deezerId:\n          type: object\n          description: Deezer track ID if conversion succeeded\n      required:\n        - name\n        - artist\n        - url\n    LastfmSpiceUpWithDeezerResponseDto:\n      type: object\n      properties:\n        mode:\n          type: string\n          description: Diversity mode applied\n        inputSongs:\n          type: number\n          description: Number of input songs provided\n        foundSongs:\n          type: number\n          description: Number of input songs successfully matched on Last.fm\n        recommendations:\n          description: Recommended tracks with optional Deezer IDs\n          type: array\n          items:\n            $ref: \"#/components/schemas/LastfmSpiceUpWithDeezerResponseRecommendationDto\"\n        deezerConversion:\n          type: object\n          description: Summary of Deezer ID conversions\n          example:\n            converted: 18\n            total: 20\n      required:\n        - mode\n        - inputSongs\n        - foundSongs\n        - recommendations\n    SpotifyAuthCallbackDto:\n      type: object\n      properties:\n        code:\n          type: string\n          description: Authorization code from Spotify OAuth callback\n          example: AQD7f9...\n        state:\n          type: string\n          description: State parameter for CSRF protection\n      required:\n        - code\n    ImportPlaylistDto:\n      type: object\n      properties:\n        playlistId:\n          type: string\n          description: Spotify playlist ID or full URL\n          example: 37i9dQZF1DXcBWIGoYBM5M\n        createPlaylist:\n          type: boolean\n          description: Create as new playlist in system\n          default: true\n        playlistName:\n          type: string\n          description: Name for the imported playlist (overrides Spotify name)\n        isPublic:\n          type: boolean\n          description: Make the imported playlist public\n          default: true\n      required:\n        - playlistId\n    AnalyzeTrackDto:\n      type: object\n      properties:\n        trackId:\n          type: string\n          description: Spotify track ID or URL\n          example: 3n3Ppam7vgaVa1iaRUc9Lp\n      required:\n        - trackId\n    BatchAnalyzeTracksDto:\n      type: object\n      properties:\n        trackIds:\n          description: Array of Spotify track IDs\n          example:\n            - 3n3Ppam7vgaVa1iaRUc9Lp\n            - 7qiZfU4dY1lWllzX7mPBI\n          type: array\n          items:\n            type: string\n      required:\n        - trackIds\n    UpdateUserDto:\n      type: object\n      properties:\n        name:\n          type: string\n        profileImage:\n          type: string\n    TrackResponseDto:\n      type: object\n      properties:\n        id:\n          type: string\n          description: Spotify track ID\n          example: 3z8h0TU7ReDPLIbEnYhWZb\n        name:\n          type: string\n          description: Track name\n          example: Bohemian Rhapsody\n        artists:\n          type: string\n          description: Comma-separated list of artist names\n          example: Queen\n        album:\n          type: string\n          description: Album name\n          example: A Night At The Opera\n        imageUrl:\n          type: object\n          description: Album cover art URL\n          example: https://i.scdn.co/image/ab67616d0000b273e8b066f70c206551210d902b\n          nullable: true\n      required:\n        - id\n        - name\n        - artists\n        - album\n    ErrorResponseDto:\n      type: object\n      properties:\n        statusCode:\n          type: number\n          description: HTTP status code\n          example: 400\n        message:\n          type: object\n          description: Error message describing what went wrong\n          example: Could not resolve any of the provided tracks\n        error:\n          type: string\n          description: Error type/category\n          example: Bad Request\n      required:\n        - statusCode\n        - message\n        - error\n    PlaylistSearchResultDto:\n      type: object\n      properties:\n        id:\n          type: string\n          description: Spotify playlist ID\n          example: 37i9dQZF1DWXRqgorJj26U\n        name:\n          type: string\n          description: Playlist name\n          example: Rock Classics\n        description:\n          type: string\n          description: Playlist description\n          example: Rock legends & epic songs that continue to inspire generations.\n        owner:\n          type: string\n          description: Playlist owner display name\n          example: Spotify\n        tracksTotal:\n          type: number\n          description: Total number of tracks in the playlist\n          example: 150\n        imageUrl:\n          type: object\n          description: Playlist cover image URL\n          example: https://i.scdn.co/image/ab67706f00000003...\n          nullable: true\n      required:\n        - id\n        - name\n        - description\n        - owner\n        - tracksTotal\n    PlaylistDetailResponseDto:\n      type: object\n      properties:\n        id:\n          type: string\n          description: Spotify playlist ID\n          example: 37i9dQZF1DWXRqgorJj26U\n        name:\n          type: string\n          description: Playlist name\n          example: Rock Classics\n        description:\n          type: string\n          description: Playlist description\n          example: Rock legends & epic songs\n        imageUrl:\n          type: object\n          description: Playlist cover image URL\n          example: https://i.scdn.co/image/ab67706f00000003...\n          nullable: true\n        tracks:\n          description: Array of tracks in the playlist\n          type: array\n          items:\n            $ref: \"#/components/schemas/TrackResponseDto\"\n      required:\n        - id\n        - name\n        - description\n        - tracks\n    TrackInput:\n      type: object\n      properties:\n        id:\n          type: string\n          description: Spotify track ID (mutually exclusive with name)\n          example: 3n3Ppam7vgaVa1iaRUc9Lp\n        name:\n          type: string\n          description: Track name for search-based resolution (mutually exclusive with id)\n          example: Bohemian Rhapsody\n        artist:\n          type: string\n          description: Artist name to improve search accuracy (used with name)\n          example: Queen\n    RecommendationRequestDto:\n      type: object\n      properties:\n        tracks:\n          description: Array of 1-5 tracks to base recommendations on. Each track can be\n            specified by ID, name (with optional artist), or a mix of both.\n          minItems: 1\n          maxItems: 5\n          example:\n            - id: 3n3Ppam7vgaVa1iaRUc9Lp\n            - name: Stairway to Heaven\n              artist: Led Zeppelin\n          type: array\n          items:\n            $ref: \"#/components/schemas/TrackInput\"\n        limit:\n          type: number\n          description: Number of recommendations to return (1-100). Defaults to 20 if not\n            specified.\n          minimum: 1\n          maximum: 100\n          default: 20\n          example: 30\n      required:\n        - tracks\n    TrackWithPreviewResponseDto:\n      type: object\n      properties:\n        id:\n          type: string\n          description: Spotify track ID\n          example: 3z8h0TU7ReDPLIbEnYhWZb\n        name:\n          type: string\n          description: Track name\n          example: Bohemian Rhapsody\n        artists:\n          type: string\n          description: Comma-separated list of artist names\n          example: Queen\n        album:\n          type: string\n          description: Album name\n          example: A Night At The Opera\n        imageUrl:\n          type: object\n          description: Album cover art URL\n          example: https://i.scdn.co/image/ab67616d0000b273e8b066f70c206551210d902b\n          nullable: true\n        previewUrl:\n          type: object\n          description: 30-second preview URL (if available)\n          example: https://p.scdn.co/mp3-preview/...\n          nullable: true\n      required:\n        - id\n        - name\n        - artists\n        - album\n    LegacyRecommendationRequestDto:\n      type: object\n      properties:\n        trackIds:\n          description: Array of 1-5 Spotify track IDs to base recommendations on. Always\n            returns 20 recommendations.\n          minItems: 1\n          maxItems: 5\n          example:\n            - 3n3Ppam7vgaVa1iaRUc9Lp\n            - 5ChkMS8OtdzJeqyybCc9R5\n            - 0c6xIDDpzE81m2q797ordA\n          type: array\n          items:\n            type: string\n      required:\n        - trackIds\n    BulkSongsRecommendationDto:\n      type: object\n      properties:\n        giveSongs:\n          description: Array of song objects. Each song can have an ID or name (with\n            optional artist). Will use up to 5 songs as seeds.\n          minItems: 1\n          example:\n            - id: 3n3Ppam7vgaVa1iaRUc9Lp\n              name: Mr. Brightside\n            - name: Somebody Told Me\n              artist: The Killers\n            - name: When You Were Young\n              artist: The Killers\n            - id: 0eGsygTp906u18L0Oimnem\n          type: array\n          items:\n            $ref: \"#/components/schemas/TrackInput\"\n        n:\n          type: number\n          description: Number of recommendations to return (1-100). Defaults to number of\n            input songs if not specified.\n          minimum: 1\n          maximum: 100\n          example: 10\n      required:\n        - giveSongs\n    RecommendationMode:\n      type: number\n      enum:\n        - 0\n        - 1\n        - 2\n      description: >-\n        Recommendation mode:\n\n        - 0 (Strict): Returns tracks from the same artists as the seed tracks\n\n        - 1 (Balanced): Returns tracks from related artists in similar genres\n        (uses Spotify API internally)\n\n        - 2 (Diverse): Returns tracks with vague genre adherence for more\n        variety (uses Spotify API internally)\n\n        Defaults to Balanced (1) if not specified.\n    DeezerRecommendationRequestDto:\n      type: object\n      properties:\n        trackNames:\n          description: Array of track names to base recommendations on. Can be simple\n            track names or \"Artist - Track\" format for better accuracy.\n          minItems: 1\n          example:\n            - Bohemian Rhapsody\n            - Queen - We Will Rock You\n            - Led Zeppelin - Stairway to Heaven\n            - Hotel California\n          type: array\n          items:\n            type: string\n        n:\n          type: number\n          description: Number of recommendations to return. Defaults to the number of\n            input tracks if not specified.\n          minimum: 1\n          maximum: 100\n          example: 10\n        mode:\n          description: >-\n            Recommendation mode:\n\n            - 0 (Strict): Returns tracks from the same artists as the seed\n            tracks\n\n            - 1 (Balanced): Returns tracks from related artists in similar\n            genres (uses Spotify API internally)\n\n            - 2 (Diverse): Returns tracks with vague genre adherence for more\n            variety (uses Spotify API internally)\n\n            Defaults to Balanced (1) if not specified.\n          example: 1\n          allOf:\n            - $ref: \"#/components/schemas/RecommendationMode\"\n      required:\n        - trackNames\n    DeezerArtistResponseDto:\n      type: object\n      properties:\n        id:\n          type: number\n          description: Deezer artist ID\n          example: 27\n        name:\n          type: string\n          description: Artist name\n          example: Daft Punk\n        link:\n          type: string\n          description: Deezer artist page URL\n          example: https://www.deezer.com/artist/27\n        picture:\n          type: string\n          description: Primary artist image\n          example: https://api.deezer.com/artist/27/image\n        picture_small:\n          type: string\n          description: Small artist image\n          example: https://e-cdns-images.dzcdn.net/images/artist/12345/56x56-000000-80-0-0.jpg\n        picture_medium:\n          type: string\n          description: Medium artist image\n          example: https://e-cdns-images.dzcdn.net/images/artist/12345/250x250-000000-80-0-0.jpg\n        picture_big:\n          type: string\n          description: Large artist image\n          example: https://e-cdns-images.dzcdn.net/images/artist/12345/500x500-000000-80-0-0.jpg\n        picture_xl:\n          type: string\n          description: Extra large artist image\n          example: https://e-cdns-images.dzcdn.net/images/artist/12345/1000x1000-000000-80-0-0.jpg\n        tracklist:\n          type: string\n          description: Tracklist URL for artist top tracks\n          example: https://api.deezer.com/artist/27/top?limit=50\n        type:\n          type: string\n          description: Object type identifier\n          example: artist\n      required:\n        - id\n        - name\n        - link\n        - picture\n        - picture_small\n        - picture_medium\n        - picture_big\n        - picture_xl\n        - tracklist\n        - type\n    DeezerAlbumResponseDto:\n      type: object\n      properties:\n        id:\n          type: number\n          description: Deezer album ID\n          example: 302127\n        title:\n          type: string\n          description: Album title\n          example: Discovery\n        cover:\n          type: string\n          description: Primary album cover\n          example: https://api.deezer.com/album/302127/image\n        cover_small:\n          type: string\n          description: Small album cover\n          example: https://e-cdns-images.dzcdn.net/images/cover/12345/56x56-000000-80-0-0.jpg\n        cover_medium:\n          type: string\n          description: Medium album cover\n          example: https://e-cdns-images.dzcdn.net/images/cover/12345/250x250-000000-80-0-0.jpg\n        cover_big:\n          type: string\n          description: Large album cover\n          example: https://e-cdns-images.dzcdn.net/images/cover/12345/500x500-000000-80-0-0.jpg\n        cover_xl:\n          type: string\n          description: Extra large album cover\n          example: https://e-cdns-images.dzcdn.net/images/cover/12345/1000x1000-000000-80-0-0.jpg\n        md5_image:\n          type: string\n          description: MD5 hash for the cover image\n          example: 1a2b3c4d5e6f7890abcdef1234567890\n        tracklist:\n          type: string\n          description: Tracklist URL for the album\n          example: https://api.deezer.com/album/302127/tracks\n        type:\n          type: string\n          description: Object type identifier\n          example: album\n      required:\n        - id\n        - title\n        - cover\n        - cover_small\n        - cover_medium\n        - cover_big\n        - cover_xl\n        - md5_image\n        - tracklist\n        - type\n    DeezerTrackResponseDto:\n      type: object\n      properties:\n        id:\n          type: number\n          description: Deezer track ID\n          example: 3135556\n        readable:\n          type: boolean\n          description: Whether the track is available for playback\n          example: true\n        title:\n          type: string\n          description: Track title\n          example: Harder, Better, Faster, Stronger\n        title_short:\n          type: string\n          description: Short track title\n          example: Harder Better Faster Stronger\n        title_version:\n          type: string\n          description: Track version information\n          example: \"\"\n        link:\n          type: string\n          description: Deezer track URL\n          example: https://www.deezer.com/track/3135556\n        duration:\n          type: number\n          description: Track duration in seconds\n          example: 224\n        rank:\n          type: number\n          description: Track popularity ranking\n          example: 654321\n        explicit_lyrics:\n          type: boolean\n          description: Whether the track contains explicit lyrics\n          example: false\n        explicit_content_lyrics:\n          type: number\n          description: Explicit lyrics flag (numeric)\n          example: 0\n        explicit_content_cover:\n          type: number\n          description: Explicit cover flag (numeric)\n          example: 0\n        preview:\n          type: object\n          description: Preview URL (30 seconds)\n          example: https://cdns-preview-d.dzcdn.net/stream/abcdefg\n          nullable: true\n        md5_image:\n          type: string\n          description: MD5 hash for the track image\n          example: 1a2b3c4d5e6f7890abcdef1234567890\n        artist:\n          description: Track artist details\n          allOf:\n            - $ref: \"#/components/schemas/DeezerArtistResponseDto\"\n        album:\n          description: Track album details\n          allOf:\n            - $ref: \"#/components/schemas/DeezerAlbumResponseDto\"\n        type:\n          type: string\n          description: Object type identifier\n          example: track\n      required:\n        - id\n        - readable\n        - title\n        - title_short\n        - title_version\n        - link\n        - duration\n        - rank\n        - explicit_lyrics\n        - explicit_content_lyrics\n        - explicit_content_cover\n        - md5_image\n        - artist\n        - album\n        - type\n",
    ".eslintignore": "# File: .eslintignore\n\n# Dependencies\nnode_modules/\n\n# Build output\ndist/\n\n# Web submodule (has its own linting)\nweb/\n\n# Data and logs\ndata/\nlogs/\n\n# Database migrations\nmigrations/\n\n# Git\n.git/\n\n# Config files\n*.config.js\n*.config.cjs\n*.config.mjs\n\n# Other generated/cache files\n*.d.ts\ncoverage/\n.cache/\n",
    "pnpm-workspace.yaml": "onlyBuiltDependencies:\n  - '@discordjs/opus'\n  - '@prisma/engines'\n  - esbuild\n  - prisma\n",
    "docker-compose.web.yml": "# Optional web interface services. Use with:\n# docker compose -f docker-compose.yml -f docker-compose.web.yml up -d --build\n\nservices:\n  # Web Interface Service (Optional - only needed if you want the web UI)\n  web:\n    build:\n      context: ./web\n      dockerfile: Dockerfile\n    container_name: isobel-web\n    restart: unless-stopped\n    ports:\n      - \"${WEB_PORT:-3001}:3001\"\n    volumes:\n      - ./data:/data:de # Read-only access to bot data\n    environment:\n      # Web server configuration\n      - NODE_ENV=production\n      - PORT=3001\n\n      # Database (required - must be PostgreSQL)\n      - DATABASE_URL=${DATABASE_URL}\n\n      # Discord OAuth (required for web interface)\n      - DISCORD_CLIENT_ID=${DISCORD_CLIENT_ID}\n      - DISCORD_CLIENT_SECRET=${DISCORD_CLIENT_SECRET}\n      - NEXTAUTH_SECRET=${NEXTAUTH_SECRET}\n      - NEXTAUTH_URL=${NEXTAUTH_URL:-http://localhost:3001}\n\n      # Optional: Bot health endpoint\n      - BOT_HEALTH_URL=${BOT_HEALTH_URL:-http://bot:3002/health}\n      - DATA_DIR=/data\n    networks:\n      - isobel-network\n    depends_on:\n      - bot\n    healthcheck:\n      test: [ \"CMD\", \"wget\", \"--quiet\", \"--tries=1\", \"--spider\", \"http://localhost:3001/health\", \"||\", \"exit\", \"1\" ]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n      start_period: 40s\n\n  # Auth Server Service (Optional - required by web interface)\n  auth:\n    build:\n      context: ./web\n      dockerfile: Dockerfile.auth\n    container_name: isobel-auth\n    restart: unless-stopped\n    ports:\n      - \"${AUTH_PORT:-3003}:3003\"\n    environment:\n      - NODE_ENV=production\n      - PORT=3003\n\n      # Database (required for NextAuth sessions)\n      - DATABASE_URL=${DATABASE_URL}\n\n      # NextAuth configuration\n      - NEXTAUTH_URL=${NEXTAUTH_URL:-http://localhost:3003}\n      - NEXTAUTH_SECRET=${NEXTAUTH_SECRET}\n\n      # Discord OAuth\n      - DISCORD_CLIENT_ID=${DISCORD_CLIENT_ID}\n      - DISCORD_CLIENT_SECRET=${DISCORD_CLIENT_SECRET}\n    networks:\n      - isobel-network\n    depends_on:\n      - bot\n    healthcheck:\n      test: [ \"CMD\", \"wget\", \"--quiet\", \"--tries=1\", \"--spider\", \"http://localhost:3003/health\", \"||\", \"exit\", \"1\" ]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n      start_period: 40s\n",
    "ecosystem.config.cjs": "/**\n * PM2 Ecosystem Configuration\n *\n * Usage:\n *   - Production: pm2 start ecosystem.config.cjs --env production\n *   - Staging: pm2 start ecosystem.config.cjs --env staging\n *   - Development: pm2 start ecosystem.config.cjs --env development\n *\n * Or use npm scripts:\n *   - npm run pm2:start:prod\n *   - npm run pm2:start:staging\n *   - npm run pm2:start:dev\n */\n\nmodule.exports = {\n  apps: [\n    {\n      name: 'isobel',\n      script: 'dist/scripts/migrate-and-start.js',\n      interpreter: 'node',\n      interpreter_args: '--enable-source-maps',\n      \n      // Process management\n      instances: 1,\n      exec_mode: 'fork', // Use 'cluster' for multi-core scaling\n      \n      // Restart behavior\n      autorestart: true,\n      watch: false, // Set to true for development auto-reload\n      ignore_watch: [\n        'node_modules',\n        'logs',\n        'data',\n        '.git',\n        'dist',\n        '*.log',\n      ],\n      max_memory_restart: '1G',\n      min_uptime: '10s', // Minimum uptime before considering app stable\n      max_restarts: 10, // Max restarts within restart_delay\n      restart_delay: 4000, // Delay between restarts (ms)\n      \n      // Logging\n      error_file: './logs/pm2-error.log',\n      out_file: './logs/pm2-out.log',\n      log_file: './logs/pm2-combined.log',\n      log_date_format: 'YYYY-MM-DD HH:mm:ss Z',\n      time: true,\n      merge_logs: true,\n      log_type: 'json', // JSON format for better parsing\n      combine_logs: true,\n      \n      // Node.js options\n      node_args: '--enable-source-maps',\n      \n      // Environment variables\n      env_file: '.env',\n      env: {\n        NODE_ENV: 'development',\n      },\n      env_development: {\n        NODE_ENV: 'development',\n        DEBUG: 'isobel:*',\n      },\n      env_staging: {\n        NODE_ENV: 'staging',\n      },\n      env_production: {\n        NODE_ENV: 'production',\n      },\n      \n      // Monitoring & Health checks\n      pmx: true, // Enable PM2 monitoring\n      listen_timeout: 10000, // Time to wait for app to listen (ms)\n      kill_timeout: 5000, // Time to wait for graceful shutdown (ms)\n      \n      // Advanced options\n      instance_var: 'INSTANCE_ID', // Environment variable for instance ID\n      wait_ready: false, // Wait for 'ready' event from app\n      shutdown_with_message: false, // Graceful shutdown on SIGINT/SIGTERM\n      \n      // Source map support\n      source_map_support: true,\n    },\n  ],\n  \n  // Deployment configuration (optional)\n  deploy: {\n    production: {\n      user: 'node',\n      host: ['your-server.com'],\n      ref: 'origin/main',\n      repo: 'git@github.com:soulwax/ISOBEL.git',\n      path: '/var/www/isobel',\n      'post-deploy': 'npm install && npm run build && pm2 reload ecosystem.config.cjs --env production',\n      'pre-setup': '',\n    },\n  },\n};\n",
    ".dockerignore": "# File: .dockerignore\n\n# Dependencies (will be reinstalled)\nnode_modules\nweb/node_modules\n\n# Build artifacts (will be regenerated)\ndist\ndts\nweb/dist\nweb/build\n\n# Data and logs (should be mounted as volumes)\ndata\nlogs\nweb/logs\n\n# Environment files (should be passed as env vars or mounted)\n.env\n.env.local\n.env.production\n.env.development\nweb/.env\nweb/.env.local\n\n# Git and development files\n.git\n.github\n.gitignore\n.gitmodules\n.gitattributes\n\n# Docker files (not needed in image)\nDockerfile\ndocker-compose.yml\n.dockerignore\n\n# IDE and editor files\n.vscode\n.idea\n.cursor\n*.swp\n*.swo\n*~\n\n# OS files\n.DS_Store\nThumbs.db\n\n# Documentation (optional - comment out if you want docs in image)\n# README.md\n# CLAUDE.md\n# *.md\n\n# Test files\n**/*.test.ts\n**/*.test.js\n**/*.spec.ts\n**/*.spec.js\n\n# PM2 runtime files\n.pm2\n",
    "web/Dockerfile": "# Web Interface Dockerfile\n# Multi-stage build for the ISOBEL web interface\n\n# Stage 1: Build\nFROM node:24-alpine AS builder\n\nWORKDIR /app\n\n# Copy package files\nCOPY package*.json ./\n\n# Install dependencies\nRUN npm ci\n\n# Copy source code\nCOPY . .\n\n# Build the application\nRUN npm run build\n\n# Stage 2: Production\nFROM node:24-alpine\n\nWORKDIR /app\n\n# Install production dependencies\nCOPY package*.json ./\nRUN npm ci --omit=dev\n\n# Copy built application from builder\nCOPY --from=builder /app/build ./build\nCOPY --from=builder /app/scripts ./scripts\n\n# Copy necessary config files\nCOPY tsconfig.json ./\nCOPY vite.config.ts ./\n\n# Expose port\nEXPOSE 3001\n\n# Set environment\nENV NODE_ENV=production\nENV PORT=3001\n\n# Health check (using node instead of wget for Alpine)\nHEALTHCHECK --interval=30s --timeout=10s --start-period=40s --retries=3 \\\n  CMD node -e \"require('http').get('http://localhost:3001/health', (r) => process.exit(r.statusCode === 200 ? 0 : 1)).on('error', () => process.exit(1))\"\n\n# Start the production server\nCMD [\"node\", \"scripts/serve-prod.js\"]\n",
    "web/env.d.ts": "// File: web/env.d.ts\n\n/// <reference types=\"vite/client\" />\n\ninterface ImportMetaEnv {\n  readonly VITE_BOT_HEALTH_URL?: string;\n  readonly VITE_AUTH_API_URL?: string;\n}\n\ninterface ImportMeta {\n  readonly env: ImportMetaEnv;\n}\n",
    "web/.vercelignore": "# Dependencies\nnode_modules/\n\n# Build artifacts (generated during deployment)\nbuild/\ndist/\n.vercel/\n\n# Development files\n*.log\n*.local\n.env.local\n.env.development.local\n.env.test.local\n.env.production.local\n\n# IDE\n.idea/\n.vscode/\n*.swp\n*.swo\n\n# Testing\ncoverage/\n*.test.ts\n*.spec.ts\n\n# Documentation\n*.md\n!README.md\n\n# PM2\necosystem.config.cjs\nlogs/\n\n# Drizzle migrations (handled separately)\ndrizzle/\n\n# Scripts not needed for Vercel\nscripts/\n\n# Type checking artifacts\n*.tsbuildinfo\n",
    "web/api/index.ts": "// File: web/api/index.ts\n// Vercel Serverless Function - handles all /api/* routes\n\nimport type { VercelRequest, VercelResponse } from '@vercel/node';\n\n// Create Express app instance (singleton for warm starts)\nlet app: any = null;\nlet appError: Error | null = null;\n\nasync function getApp() {\n  if (appError) {\n    throw appError;\n  }\n  if (!app) {\n    try {\n      const { createApp } = await import('../src/server/app');\n      app = createApp();\n    } catch (error) {\n      appError = error instanceof Error ? error : new Error(String(error));\n      throw appError;\n    }\n  }\n  return app;\n}\n\n// Export Vercel serverless function handler\nexport default async function handler(req: VercelRequest, res: VercelResponse) {\n  try {\n    const expressApp = await getApp();\n\n    // Convert Vercel request/response to Express format\n    return new Promise<void>((resolve, reject) => {\n      try {\n        expressApp(req as any, res as any, (err?: any) => {\n          if (err) {\n            console.error('Express handler error:', err);\n            reject(err);\n          } else {\n            resolve();\n          }\n        });\n      } catch (error) {\n        console.error('Handler execution error:', error);\n        reject(error);\n      }\n    });\n  } catch (error) {\n    console.error('App initialization error:', error);\n    const errorMessage = error instanceof Error ? error.message : String(error);\n    res.status(500).json({ \n      error: 'Internal server error',\n      message: process.env.NODE_ENV === 'development' ? errorMessage : 'Service unavailable'\n    });\n  }\n}\n",
    "web/Dockerfile.auth": "# Auth Server Dockerfile\n# Dockerfile for the ISOBEL authentication server\n\nFROM node:24-alpine\n\nWORKDIR /app\n\n# Copy package files\nCOPY package*.json ./\n\n# Install dependencies and tsx globally for running TypeScript\nRUN npm ci && npm install -g tsx\n\n# Copy source code\nCOPY . .\n\n# Expose port\nEXPOSE 3003\n\n# Set environment\nENV NODE_ENV=production\nENV PORT=3003\n\n# Health check (using node instead of wget for Alpine)\nHEALTHCHECK --interval=30s --timeout=10s --start-period=40s --retries=3 \\\n  CMD node -e \"require('http').get('http://localhost:3003/health', (r) => process.exit(r.statusCode === 200 ? 0 : 1)).on('error', () => process.exit(1))\"\n\n# Start the auth server\nCMD [\"tsx\", \"src/server/index.ts\"]\n",
    "web/ecosystem.config.cjs": "const path = require('path');\nconst { loadEnvWithSafeguard } = require('./scripts/load-env.cjs');\n\nloadEnvWithSafeguard(path.resolve(__dirname, '.env'));\n\nmodule.exports = {\n  apps: [\n    {\n      name: 'isobel-web',\n      script: path.join(__dirname, 'scripts', 'start-web.js'),\n      cwd: __dirname,\n      instances: 1,\n      exec_mode: 'fork',\n      autorestart: true,\n      watch: false,\n      max_memory_restart: '1G',\n      env: {\n        NODE_ENV: 'development',\n        PORT: process.env.PORT || '3001',\n      },\n      env_production: {\n        NODE_ENV: 'production',\n        PORT: process.env.PORT || '3001',\n      },\n      // In production, serves optimized build from ./build directory\n      // Make sure to run 'npm run build' before starting in production\n      error_file: path.join(__dirname, 'logs', 'web-error.log'),\n      out_file: path.join(__dirname, 'logs', 'web-out.log'),\n      log_date_format: 'YYYY-MM-DD HH:mm:ss Z',\n      merge_logs: true,\n    },\n    {\n      name: 'isobel-auth',\n      script: 'npm',\n      args: 'run dev:auth',\n      cwd: __dirname,\n      instances: 1,\n      exec_mode: 'fork',\n      autorestart: true,\n      watch: false,\n      max_memory_restart: '512M',\n      env: {\n        NODE_ENV: 'development',\n        PORT: '3003', // Auth server always uses port 3003\n        NEXTAUTH_URL: process.env.NEXTAUTH_URL || 'http://localhost:3001',\n      },\n      env_production: {\n        NODE_ENV: 'production',\n        PORT: '3003', // Auth server always uses port 3003\n        NEXTAUTH_URL: process.env.NEXTAUTH_URL || 'https://isobelnet.de',\n      },\n      error_file: path.join(__dirname, 'logs', 'auth-error.log'),\n      out_file: path.join(__dirname, 'logs', 'auth-out.log'),\n      log_date_format: 'YYYY-MM-DD HH:mm:ss Z',\n      merge_logs: true,\n    },\n  ],\n};\n",
    "web/scripts/load-env.cjs": "const { existsSync, readFileSync } = require('node:fs');\nconst { resolve } = require('node:path');\nconst { config, parse } = require('dotenv');\n\nconst VERCEL_MARKERS = ['VERCEL', 'VERCEL_ENV', 'VERCEL_URL', 'NOW_REGION'];\n\nlet hasLoadedEnv = false;\n\nfunction isVercelRuntime(env = process.env) {\n  return VERCEL_MARKERS.some((marker) => Boolean(env[marker] && env[marker].trim()));\n}\n\nfunction findConflictingKeys(envPath, env = process.env) {\n  if (!existsSync(envPath)) {\n    return [];\n  }\n\n  const parsedEnv = parse(readFileSync(envPath));\n  return Object.keys(parsedEnv).filter((key) => {\n    const runtimeValue = env[key];\n    return runtimeValue !== undefined && runtimeValue !== parsedEnv[key];\n  });\n}\n\nfunction loadEnvWithSafeguard(envPath = resolve(process.cwd(), '.env')) {\n  if (hasLoadedEnv) {\n    return;\n  }\n\n  const onVercel = isVercelRuntime();\n  const conflictingKeys = findConflictingKeys(envPath);\n\n  if (onVercel && conflictingKeys.length > 0) {\n    console.warn(\n      `[env] Vercel runtime detected. Keeping platform env values over ${envPath} for keys: ${conflictingKeys.join(', ')}`\n    );\n  }\n\n  config({\n    path: envPath,\n    override: !onVercel,\n  });\n\n  hasLoadedEnv = true;\n}\n\nmodule.exports = {\n  loadEnvWithSafeguard,\n  isVercelRuntime,\n};\n",
    "web/scripts/load-env.js": "import { existsSync, readFileSync } from 'node:fs';\nimport { resolve } from 'node:path';\nimport { config, parse } from 'dotenv';\n\nconst VERCEL_MARKERS = ['VERCEL', 'VERCEL_ENV', 'VERCEL_URL', 'NOW_REGION'];\n\nlet hasLoadedEnv = false;\n\nfunction isVercelRuntime(env = process.env) {\n  return VERCEL_MARKERS.some((marker) => Boolean(env[marker]?.trim()));\n}\n\nfunction findConflictingKeys(envPath, env = process.env) {\n  if (!existsSync(envPath)) {\n    return [];\n  }\n\n  const parsedEnv = parse(readFileSync(envPath));\n  return Object.keys(parsedEnv).filter((key) => {\n    const runtimeValue = env[key];\n    return runtimeValue !== undefined && runtimeValue !== parsedEnv[key];\n  });\n}\n\nexport function loadEnvWithSafeguard(envPath = resolve(process.cwd(), '.env')) {\n  if (hasLoadedEnv) {\n    return;\n  }\n\n  const onVercel = isVercelRuntime();\n  const conflictingKeys = findConflictingKeys(envPath);\n\n  if (onVercel && conflictingKeys.length > 0) {\n    console.warn(\n      `[env] Vercel runtime detected. Keeping platform env values over ${envPath} for keys: ${conflictingKeys.join(', ')}`\n    );\n  }\n\n  config({\n    path: envPath,\n    override: !onVercel,\n  });\n\n  hasLoadedEnv = true;\n}\n",
    "web/src/lib/load-env.ts": "import { existsSync, readFileSync } from 'node:fs';\nimport { resolve } from 'node:path';\nimport { config, parse } from 'dotenv';\n\nconst VERCEL_MARKERS = ['VERCEL', 'VERCEL_ENV', 'VERCEL_URL', 'NOW_REGION'] as const;\n\nlet hasLoadedEnv = false;\n\nexport function isVercelRuntime(env: NodeJS.ProcessEnv = process.env): boolean {\n  return VERCEL_MARKERS.some((marker) => Boolean(env[marker]?.trim()));\n}\n\nfunction findConflictingKeys(envPath: string, env: NodeJS.ProcessEnv = process.env): string[] {\n  if (!existsSync(envPath)) {\n    return [];\n  }\n\n  const parsedEnv = parse(readFileSync(envPath));\n  return Object.keys(parsedEnv).filter((key) => {\n    const runtimeValue = env[key];\n    return runtimeValue !== undefined && runtimeValue !== parsedEnv[key];\n  });\n}\n\nexport function loadEnvWithSafeguard(envPath = resolve(process.cwd(), '.env')): void {\n  if (hasLoadedEnv) {\n    return;\n  }\n\n  const onVercel = isVercelRuntime();\n  const conflictingKeys = findConflictingKeys(envPath);\n\n  if (onVercel && conflictingKeys.length > 0) {\n    console.warn(\n      `[env] Vercel runtime detected. Keeping platform env values over ${envPath} for keys: ${conflictingKeys.join(', ')}`\n    );\n  }\n\n  config({\n    path: envPath,\n    override: !onVercel,\n  });\n\n  hasLoadedEnv = true;\n}\n",
    "src/ffmpeggy.d.ts": "// Type declaration for ffmpeggy (package exports don't expose types for ESM resolution)\ndeclare module 'ffmpeggy' {\n  export interface FFmpeggyOptions {\n    cwd?: string;\n    input?: string | NodeJS.ReadableStream;\n    output?: string | NodeJS.WritableStream;\n    pipe?: boolean;\n    globalOptions?: string[];\n    inputOptions?: string[];\n    outputOptions?: string[];\n    overwriteExisting?: boolean;\n    hideBanner?: boolean;\n    autorun?: boolean;\n  }\n\n  export class FFmpeggy {\n    constructor(opts?: FFmpeggyOptions);\n    run(): Promise<unknown>;\n    stop(signal?: number): Promise<void>;\n    toStream(): NodeJS.ReadableStream;\n    on(event: 'error', listener: (error: Error) => void): this;\n    on(event: 'start', listener: (args: readonly string[]) => void): this;\n  }\n}\n",
    "src/scripts/migrate-and-start.ts": "// File: src/scripts/migrate-and-start.ts\n\n// CRITICAL: This must be the FIRST import to load environment variables\nimport './load-env.js';\n\nimport { Prisma, PrismaClient } from '@prisma/client';\nimport { PrismaPg } from '@prisma/adapter-pg';\nimport { Pool } from 'pg';\nimport { execa, ExecaError } from 'execa';\nimport { promises as fs } from 'fs';\nimport ora from 'ora';\nimport { startBot } from '../index.js';\nimport { DATA_DIR } from '../services/config.js';\nimport createDatabaseUrl, { createDatabasePath } from '../utils/create-database-url.js';\nimport logBanner from '../utils/log-banner.js';\n\n// PostgreSQL is required - DATABASE_URL must be set\nconst databaseUrl = process.env.DATABASE_URL;\nif (!databaseUrl) {\n  console.error('DATABASE_URL environment variable is required for PostgreSQL');\n  process.exit(1);\n}\n\nconst isFileDatabase = databaseUrl.startsWith('file:');\nif (isFileDatabase) {\n  console.error('SQLite is not supported. Please set DATABASE_URL to a PostgreSQL connection string.');\n  process.exit(1);\n}\n\n// PostgreSQL - use adapter\nconst pool = new Pool({ connectionString: databaseUrl });\nconst adapter = new PrismaPg(pool);\nconst client = new PrismaClient({ adapter });\n\nconst migrateFromSequelizeToPrisma = async () => {\n  await execa('prisma', ['migrate', 'resolve', '--applied', '20220101155430_migrate_from_sequelize'], {preferLocal: true});\n};\n\nconst doesUserHaveExistingDatabase = async () => {\n  try {\n    await fs.access(createDatabasePath(DATA_DIR));\n\n    return true;\n  } catch {\n    return false;\n  }\n};\n\nconst hasDatabaseBeenMigratedToPrisma = async () => {\n  try {\n    await client.$queryRaw`SELECT COUNT(id) FROM _prisma_migrations`;\n  } catch (error: unknown) {\n    if (error instanceof Prisma.PrismaClientKnownRequestError && (error as Prisma.PrismaClientKnownRequestError).code === 'P2010') {\n      // Table doesn't exist\n      return false;\n    }\n\n    throw error;\n  }\n\n  return true;\n};\n\n(async () => {\n  // Banner\n  logBanner();\n\n  const spinner = ora('Applying database migrations...').start();\n\n  if (isFileDatabase && await doesUserHaveExistingDatabase()) {\n    if (!(await hasDatabaseBeenMigratedToPrisma())) {\n      try {\n        await migrateFromSequelizeToPrisma();\n      } catch (error) {\n        if ((error as ExecaError).stderr) {\n          spinner.fail('Failed to apply database migrations (going from Sequelize to Prisma):');\n          console.error((error as ExecaError).stderr);\n          process.exit(1);\n        } else {\n          throw error;\n        }\n      }\n    }\n  }\n\n  try {\n    await execa('prisma', ['migrate', 'deploy'], {preferLocal: true});\n    spinner.succeed('Database migrations applied.');\n  } catch (error: unknown) {\n    if ((error as ExecaError).stderr) {\n      const errorMessage = (error as ExecaError).stderr as string;\n\n      // P3005: Database schema is not empty - need to baseline migrations first\n      if (errorMessage && typeof errorMessage === 'string' && errorMessage.includes('P3005')) {\n        spinner.fail('Database schema is not empty. Need to baseline migrations first.');\n        console.error('\\n\u274c The database has an existing schema but no migration history.');\n        console.error('\ud83d\udcdd This usually means you need to baseline your migrations.\\n');\n        console.error('To fix this, run ONE of the following commands:\\n');\n        console.error('  1. Baseline existing migrations (if database has ISOBEL tables):');\n        console.error('     docker compose exec bot npx prisma migrate resolve --applied \"0_init\"\\n');\n        console.error('  2. Reset and recreate the database (WARNING: deletes all data):');\n        console.error('     docker compose exec bot npx prisma migrate reset --force\\n');\n        console.error('  3. Create a fresh baseline migration:');\n        console.error('     docker compose exec bot npx prisma migrate diff --from-empty --to-schema-datamodel schema.prisma --script > baseline.sql');\n        console.error('     # Then apply it manually to your database\\n');\n        process.exit(1);\n      } else {\n        spinner.fail('Failed to apply database migrations:');\n        console.error(errorMessage);\n        process.exit(1);\n      }\n    } else {\n      throw error;\n    }\n  }\n\n  await startBot();\n})();\n",
    "src/scripts/load-env.ts": "// Load environment variables before anything else\nimport dotenv from 'dotenv';\nimport { fileURLToPath } from 'url';\nimport { dirname, join } from 'path';\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = dirname(__filename);\nconst projectRoot = join(__dirname, '..', '..');\n\ndotenv.config({ path: join(projectRoot, '.env') });\n"
  }
}