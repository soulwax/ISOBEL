# ISOBEL Environment Configuration
# Copy this file to .env and fill in your values.
# Variables marked REQUIRED must be set. OPTIONAL variables have safe defaults or are feature-specific.

# ============================================
# REQUIRED: Discord Bot Token
# ============================================
DISCORD_TOKEN=your-discord-bot-token-here
# Create a bot at: https://discord.com/developers/applications

# ============================================
# REQUIRED: Songbird API
# ============================================
SONGBIRD_BASE_URL=https://your-songbird-api-url
SONGBIRD_API_KEY=your-songbird-api-key

# ============================================
# REQUIRED: Database
# ============================================
DATABASE_URL=postgresql://user:password@host:5432/isobel?sslmode=require
# DATABASE_URL_UNPOOLED=postgresql://user:password@host:5432/isobel?sslmode=require
# Use DATABASE_URL_UNPOOLED for direct (non-pooled) connections (e.g. migrations).

# Examples:
# Local:    postgresql://postgres:password@localhost:5432/isobel
# Neon:     postgresql://user:pass@ep-cool-darkness-123456.us-east-2.aws.neon.tech:5432/isobel?sslmode=require
# Supabase: postgresql://postgres:pass@db.projectref.supabase.co:5432/postgres?sslmode=require

# ============================================
# OPTIONAL: Server
# ============================================
NODE_ENV=production
# development | staging | production

PORT=3001
# Web interface port. Bot health endpoint uses HEALTH_PORT (default 3002) — set separately.

HEALTH_PORT=3002
# Bot health check HTTP server port

# ============================================
# OPTIONAL: Bot Configuration
# ============================================
DATA_DIR=./data
CACHE_LIMIT=2GB

BOT_STATUS=online
# online | idle | dnd

BOT_ACTIVITY_TYPE=LISTENING
# PLAYING | LISTENING | WATCHING | STREAMING

BOT_ACTIVITY=music
# Text shown after the activity type

# BOT_ACTIVITY_URL=
# Required ONLY if BOT_ACTIVITY_TYPE=STREAMING. Must be a Twitch or YouTube URL.

# ENABLE_SPONSORBLOCK=false
# SPONSORBLOCK_TIMEOUT=5
# Skip non-music segments via SponsorBlock

# ============================================
# OPTIONAL: Song Links
# ============================================
# EXTERNAL_PLAYER_URL=https://www.darkfloor.org/?q=
# Base URL for song links in embeds. ISOBEL appends URL-encoded artist+title.
# Takes precedence over SONG_LINK_URL_TEMPLATE when both are set.

# SONG_LINK_URL_TEMPLATE=https://<url>/q={artist}+{title}
# Legacy template. Supported placeholders: {artist}, {title}, {query}

# ============================================
# OPTIONAL: FFmpeg
# ============================================
# FFMPEG_PATH=/usr/bin/ffmpeg
# FFPROBE_PATH=/usr/bin/ffprobe
# Only needed if ffmpeg/ffprobe are not in PATH

# ============================================
# OPTIONAL: Bot Command Registration
# ============================================
# REGISTER_COMMANDS_ON_BOT=false
# Set to true to register slash commands globally instead of per-guild

# ============================================
# OPTIONAL: Alternative Songbird Endpoint
# ============================================
# SONGBIRD_NEXT_URL=
# Alternative Songbird API URL for testing/migration

# ============================================
# OPTIONAL: Web Interface (Discord OAuth + Auth.js)
# ============================================
# Create OAuth application at: https://discord.com/developers/applications
# Add redirect URL: http://your-domain:3001/api/auth/callback/discord
DISCORD_CLIENT_ID=your-discord-oauth-client-id
DISCORD_CLIENT_SECRET=your-discord-oauth-client-secret

# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET=your-random-secret-here
NEXTAUTH_URL=http://localhost:3001
# For production: https://your-domain.com

# Dev only: Vite proxies /api to the API server (when using pnpm web:dev:all)
# API_PROXY_TARGET=http://localhost:3003

# ============================================
# OPTIONAL: Vite (Browser-Exposed Variables)
# ============================================
VITE_AUTH_API_URL=/api
# Base path for auth API calls from the browser

VITE_BOT_HEALTH_URL=http://localhost:3002/health
# For production: https://health.your-domain.com/health

# ============================================
# OPTIONAL: Vercel Postgres (alternative to DATABASE_URL)
# ============================================
# If deploying to Vercel, these are auto-provided by the Vercel Postgres integration.
# You only need DATABASE_URL OR the POSTGRES_* set — not both.

# POSTGRES_URL=<provided-by-vercel>
# POSTGRES_URL_NON_POOLING=<provided-by-vercel>
# POSTGRES_URL_NO_SSL=<provided-by-vercel>
# POSTGRES_PRISMA_URL=<provided-by-vercel>
# POSTGRES_USER=<provided-by-vercel>
# POSTGRES_HOST=<provided-by-vercel>
# POSTGRES_PASSWORD=<provided-by-vercel>
# POSTGRES_DATABASE=<provided-by-vercel>

# ============================================
# DOCKER ONLY: Build Arguments
# ============================================
# These are typically injected by docker-compose.yml — do not set manually.
# COMMIT_HASH=local
# BUILD_DATE=now
